import{_ as O}from"./inputText-ov4PBEwY.js";import{_ as P}from"./appButton-BoPVuXnv.js";import{V as o,a as f,_ as E}from"./breadcrumbs-nk9dH87E.js";import{i as H,n as x,o as Q,e as X,w as t,b as e,l as s,S as b,V as M,T as N,a as V,A as m,k as $,m as w,h as Z,f as J,g as r,x as Y,aK as k,p as ee,a3 as te,aM as ae,C as se,D as le}from"./index-41xD9v_i.js";import{c as oe,a as I,f as ne,u as re,b as q,V as de}from"./index.esm-DoRl_wG_.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as z,V as D}from"./VContainer-C_OjFy-9.js";import{V as ce}from"./VTextarea-gsyupLX-.js";import{V as ue}from"./VNumberInput-fZjRyL92.js";import"./_commonjsHelpers-Cpj98o6Y.js";const d=_=>(se("data-v-8afb73a1"),_=_(),le(),_),me={style:{width:"360px",height:"360px"},class:"b-1 pa-2 d-flex justify-center"},_e=d(()=>s("label",{class:"form-label"},"需求單位",-1)),pe=d(()=>s("label",{class:"form-label"},"物資類別",-1)),fe=d(()=>s("label",{class:"form-label"},"需求介紹",-1)),be=d(()=>s("label",{class:"form-label"},"所需數量",-1)),ge=d(()=>s("p",null,"2包",-1)),ve={class:"b-1 bg-white rounded-sm pt-5 mt-1"},he=d(()=>s("label",{class:"form-label"},"捐贈數量",-1)),ye=d(()=>s("label",{class:"form-label"},"單位／姓名",-1)),xe=d(()=>s("label",{class:"form-label"},"聯絡電話",-1)),Ve={class:"mx-auto"},we=d(()=>s("div",{class:"b-1 info-margin text-center text-body-1 pa-2 bg-accent rounded-t-lg",style:{width:"150px",padding:"0","border-bottom":"0px"}},"留言板",-1)),ke={class:"b-1 pa-5 info-margin"},qe={class:"pa-4"},Ce=d(()=>s("span",null,"照管中心",-1)),Se=d(()=>s("p",{class:"ml-13 text-body-2"},"您好，請問周末親送過去可以嗎?",-1)),Ae={class:"pa-4"},Te=d(()=>s("span",null,"家防中心",-1)),Me=d(()=>s("p",{class:"ml-13 text-body-2"},"請問商品期限有限定嗎?",-1)),Ne={class:"pa-4"},$e={__name:"[id]",setup(_){const{api:B,apiAuth:F}=ee(),j=te(),g=H(),p=x(!1),K=i=>{p.value=!0},C=()=>{p.value=!1},R=["物資分享","我要募資","物資詳情"],n=x({_id:"",name:"",quantity:0,category:"",description:"",image:""}),S=x(null);(async()=>{var i,a;try{const{data:l}=await B.get("/material/"+j.params.id);n.value._id=l.result._id,n.value.name=l.result.name,n.value.quantity=l.result.quantity,n.value.category=l.result.category,n.value.description=l.result.description,n.value.organizer=l.result.organizer,n.value.image=l.result.image}catch(l){console.log(l),g({text:((a=(i=l==null?void 0:l.response)==null?void 0:i.data)==null?void 0:a.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const U=oe({donator:I().required("服務單位必填"),quantity:ne().min(1,"數量不符").required("數量必填"),phone:I().required("聯絡電話必填")}),{handleSubmit:W,isSubmitting:A,resetForm:ze}=re({validationSchema:U,initialValues:{donator:"",quantity:0,phone:""}}),v=q("donator"),h=q("quantity"),y=q("phone"),G=W(async i=>{var a,l;try{console.log(n.value._id);const c={donator:i.donator,quantity:i.quantity,phone:i.phone,id:n.value._id};console.log(c),await F.post("material/donate",c),g({text:"新增成功",snackbarProps:{color:"green"}}),C()}catch(c){console.log(c),g({text:((l=(a=c==null?void 0:c.response)==null?void 0:a.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}});function L(i){const a=document.querySelector(i);a&&(a.scrollIntoView({behavior:"smooth"}),ae(()=>{S.value.focus()}))}return(i,a)=>{const l=E,c=P,T=O;return Q(),X(D,{style:{padding:"0.5rem 15rem 3rem 15rem"}},{default:t(()=>[e(l,{title:R}),e(f,{"justify-center":"",class:"mt-5"},{default:t(()=>[e(o,{cols:"5",class:"d-flex justify-center align-center"},{default:t(()=>[s("div",me,[e(b,{src:n.value.image,"max-width":"330","max-height":"330",contain:""},null,8,["src"])])]),_:1}),e(o,{cols:"5"},{default:t(()=>[e(M,{variant:"flat",id:"resourceCard"},{default:t(()=>[e(N,{class:"font-weight-black mb-2"},{default:t(()=>[V("物資名稱："+m(n.value.name),1)]),_:1}),e(z,{thickness:"0"}),e(f,null,{default:t(()=>[e(o,{cols:"12",md:"3",class:"my-auto"},{default:t(()=>[_e]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[s("p",null,m(n.value.organizer),1)]),_:1}),e(o,{cols:"12",md:"3",class:"my-auto"},{default:t(()=>[pe]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[s("p",null,m(n.value.category),1)]),_:1}),e(o,{cols:"12",md:"3"},{default:t(()=>[fe]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[s("p",null,m(n.value.description),1)]),_:1}),e(o,{cols:"12",md:"3",class:"my-auto"},{default:t(()=>[be]),_:1}),e(o,{cols:"12",md:"9",class:"my-auto"},{default:t(()=>[ge]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{text:"我要留言",width:"90",class:"me-4 bg-third",onClick:a[0]||(a[0]=u=>L("#msg"))}),e(c,{text:"我要捐贈",width:"90",class:"bg-third",onClick:a[1]||(a[1]=u=>K(null))}),e(Y,{"max-width":"700px",modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=u=>p.value=u)},{default:t(()=>[e(M,{class:"bg-third"},{default:t(()=>[e(D,null,{default:t(()=>[e($,{class:"pa-0"},{default:t(()=>[e(w,{id:"close",icon:"$close",variant:"text",onClick:a[2]||(a[2]=u=>C())})]),_:1}),e(N,{class:"font-weight-black text-left text-h5 py-0"},{default:t(()=>[V("物資名稱："+m(n.value.name),1)]),_:1}),s("div",ve,[e(Z,null,{default:t(()=>[e(de,{onSubmit:J(r(G),["prevent"]),disabled:r(A)},{default:t(()=>[e(f,null,{default:t(()=>[e(o,{cols:"12",md:"3",class:"my-auto text-center"},{default:t(()=>[he]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(r(ue),{"control-variant":"stacked",variant:"outlined",density:"comfortable",inset:"",label:"輸入數量","hide-details":"",min:0,modelValue:r(h).value.value,"onUpdate:modelValue":a[3]||(a[3]=u=>r(h).value.value=u),"error-messages":r(h).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",md:"3",class:"my-auto text-center"},{default:t(()=>[ye]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(T,{modelValue:r(v).value.value,"onUpdate:modelValue":a[4]||(a[4]=u=>r(v).value.value=u),"error-messages":r(v).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12",md:"3",class:"my-auto text-center"},{default:t(()=>[xe]),_:1}),e(o,{cols:"12",md:"9"},{default:t(()=>[e(T,{modelValue:r(y).value.value,"onUpdate:modelValue":a[5]||(a[5]=u=>r(y).value.value=u),"error-messages":r(y).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e($,null,{default:t(()=>[s("div",Ve,[e(w,{type:"submit",text:"送出",variant:"text",class:"rounded-xl b-1 bg-primary",density:"comfortable",loading:r(A)},null,8,["loading"])])]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(f,{class:"mt-10"},{default:t(()=>[e(o,null,{default:t(()=>[we,s("div",ke,[s("div",qe,[e(k,{color:"primary b-1",class:"me-3",size:"large"},{default:t(()=>[e(b,{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRWAhVMz9jthsapuZL1tkdJks34QlTbXolbmg&s"})]),_:1}),Ce,Se]),s("div",Ae,[e(k,{color:"secondary b-1",class:"me-3",size:"large"},{default:t(()=>[e(b,{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTqnRWICFHo49O2OyVoMHrqkQmAevK654iXKw&s"})]),_:1}),Te,Me]),e(z),s("div",Ne,[e(ce,{ref_key:"textarea",ref:S,id:"msg",placeholder:"請輸入您的留言或提問",variant:"outlined",width:"600",maxlength:"20",counter:""},{prepend:t(()=>[e(k,{color:"primary ",class:"me-1 b-1",size:"large"},{default:t(()=>[e(b,{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTyKvt7MWE2LrmiZbNLMYdnwEW-OnNf1sam1g&s"})]),_:1})]),_:1},512),e(w,{variant:"text",class:"rounded-md b-1 bg-accent mt-2",density:"comfortable",ripple:!1,id:"submit"},{default:t(()=>[V("送出")]),_:1})])])]),_:1})]),_:1})]),_:1})}}},Oe=ie($e,[["__scopeId","data-v-8afb73a1"]]);export{Oe as default};
