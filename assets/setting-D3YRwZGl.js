import{i as Ue,n,O as je,r as xe,o as $,c as R,l as o,b as e,w as t,S as Fe,y as Te,B as V,a as x,m as j,V as ce,T as _e,h as he,k as Me,z as Xe,x as we,f as Ke,g as s,F as X,p as Pe,D as Ie,E as ze,u as pt,e as ie,t as ue,j as at,a9 as tt,Q as vt,q as gt,P as ft,aF as yt,aG as bt,C as Be,v as Se,a7 as st,a4 as xt}from"./index-BYCDU5qd.js";import{_ as Qe}from"./inputText-DxV5gi5B.js";import{_ as He}from"./search-Ch17rswz.js";import{c as Oe,a as L,e as $e,u as Ne,b as B,V as Ge,f as ot}from"./index.esm-BWXyq-oq.js";import{V as Re}from"./eventTable.vue_vue_type_style_index_0_scoped_7aeec39a_lang-DAfjPAsC.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Ee,a as Ve}from"./VContainer-Cm1k3jue.js";import{V as N,a as i}from"./VRow-C1zMKUOG.js";import{V as lt,b as Ce,a as qe}from"./VSelect-DeFMNacH.js";import{V as nt}from"./VTextarea-pU7N3vwH.js";import{_ as _t}from"./appButton-NIRzHUQR.js";import{V as rt,a as dt}from"./VToolbar-YgRAIi1v.js";import{_ as kt}from"./submitButton-BUdgvAMB.js";import{V as Vt,a as $t,c as ht}from"./leaflet-src-Bhu5cuqI.js";import{a as Le,b as Y,c as et,V as be}from"./VTabs-Bvbiefwi.js";import{V as wt}from"./VNavigationDrawer-iroj-0NY.js";import{V as We}from"./VBreadcrumbs-yxURR4-b.js";import"./_commonjsHelpers-8pG71l5X.js";import"./ssrBoot-BT1hUCoP.js";import"./VPagination-CqCi5Mde.js";import"./VSlideGroup-TxetrsC9.js";const Ae=k=>(Ie("data-v-7aeec39a"),k=k(),ze(),k),Ut={class:"b-1 mx-auto event-container"},Pt=Ae(()=>o("h2",{class:"bb-1 bg-accent text-center mx-auto py-1"},"活動管理",-1)),St={class:"text-center table-title"},Ct={class:"text-left table-address"},qt={class:"table-category"},Mt={class:"py-2 table-date"},Tt={class:"py-2 table-organizer"},It={class:"py-2 table-description"},zt={style:{width:"80px"}},Dt=Ae(()=>o("label",{class:"form-label"},"活動名稱：",-1)),At=Ae(()=>o("label",{class:"form-label"},"活動地點：",-1)),Bt=Ae(()=>o("label",{class:"form-label"},"活動類別：",-1)),Ft=Ae(()=>o("label",{class:"form-label"},"活動時間：",-1)),Rt=Ae(()=>o("label",{class:"form-label"},"主辦單位：",-1)),Et=Ae(()=>o("label",{class:"form-label"},"活動介紹：",-1)),Lt={class:"mx-auto mt-3"},jt={__name:"eventTable",setup(k){const{api:me,apiAuth:H}=Pe(),w=Ue(),Q=n(null),M=n([]),S=n([]),C=n(10),F=n([{key:"createdAt",order:"desc"}]),P=n(1),q=n([]),T=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"活動名稱",align:"center",sortable:!1,key:"title"},{title:"活動地點",align:"center",sortable:!1,key:"address"},{title:"活動類別",align:"center",sortable:!0,key:"category"},{title:"活動時間",align:"center",sortable:!0,key:"date"},{title:"操作",align:"center",sortable:!1,key:"action"}],A=[{title:"活動名稱",align:"center",sortable:!1,key:"title"},{title:"活動時間",align:"center",sortable:!0,key:"date"},{title:"操作",align:"center",sortable:!1,key:"action"}],_=[{title:"活動名稱",align:"center",sortable:!1,key:"title"},{title:"活動類別",align:"center",sortable:!0,key:"category"},{title:"活動時間",align:"center",sortable:!0,key:"date"},{title:"操作",align:"center",sortable:!1,key:"action"}],E=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"活動名稱",align:"center",sortable:!1,key:"title"},{title:"活動類別",align:"center",sortable:!0,key:"category"},{title:"活動時間",align:"center",sortable:!0,key:"date"},{title:"操作",align:"center",sortable:!1,key:"action"}],f=n(!0),I=n(0),y=n(""),r=async l=>{var d,h,g,b;l&&(P.value=1),f.value=!0;try{const{data:a}=await H.get("/user/event",{params:{page:P.value,itemsPerPage:C.value,sortBy:((d=F.value[0])==null?void 0:d.key)||"createdAt",sortOrder:((h=F.value[0])==null?void 0:h.order)||"desc",search:y.value}});console.log(a),q.value.splice(0,q.value.length,...a.result.data),I.value=a.result.total}catch(a){console.log(a),w({text:((b=(g=a==null?void 0:a.response)==null?void 0:g.data)==null?void 0:b.message)||"發生錯誤",snackbarProps:{color:"red"}})}f.value=!1};r();const O=["兒童","青少年","育兒","長照","精神","照顧","就學","就業","身障","親職教育","早療","紓壓","居住","醫療","司法","社工","其他"],c=n({open:!1,id:""}),z=l=>{c.value.open=!0,c.value.id=l._id,J.value.value=l.title,ee.value.value=l.date,te.value.value=l.address,le.value.value=l.category,ae.value.value=l.organizer,pe.value.value=l.description},K=()=>{c.value.open=!1,oe(),Q.value.deleteFileRecord()},G=Oe({title:L().required("活動標題必填"),date:L().required("活動日期必填"),address:L().required("活動地點必填"),category:$e().required("活動分類必填"),organizer:L().required("主辦單位必填"),description:L().required("活動介紹必填")}),{handleSubmit:Z,isSubmitting:U,resetForm:oe}=Ne({validationSchema:G,initialValues:{title:"",date:"",address:"",category:"",organizer:"",description:""}}),J=B("title"),ee=B("date"),te=B("address"),le=B("category"),ae=B("organizer"),pe=B("description"),ne=Z(async l=>{var d,h,g;if(!((d=M.value[0])!=null&&d.error)&&!(M.value.length<1))try{const b=new FormData;b.append("title",l.title),b.append("date",l.date),b.append("address",l.address),b.append("category",l.category),b.append("organizer",l.organizer),b.append("description",l.description),M.value.length>0&&b.append("image",M.value[0].file),await H.patch("/event/"+c.value.id,b),w({text:"新增成功",snackbarProps:{color:"green"}}),K(),r()}catch(b){console.log(b),w({text:((g=(h=b==null?void 0:b.response)==null?void 0:h.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),W=n(!1),de=n(null);je(y,()=>{r(!0)});const ke=l=>{de.value=l,W.value=!0},ge=()=>{W.value=!1,de.value=null},ve=async()=>{de.value&&(await m(de.value),W.value=!1,de.value=null)},m=async l=>{var d,h;try{await H.delete(`/event/${l._id}`),w({text:"刪除成功",snackbarProps:{color:"green"}}),r(!0)}catch(g){console.log(g),w({text:((h=(d=g==null?void 0:g.response)==null?void 0:d.data)==null?void 0:h.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return(l,d)=>{const h=He,g=xe("router-link"),b=xe("vue-file-agent"),a=Qe;return $(),R(X,null,[o("div",Ut,[Pt,e(Re,{"items-per-page":C.value,"onUpdate:itemsPerPage":[d[3]||(d[3]=p=>C.value=p),d[6]||(d[6]=p=>r(!1))],"sort-by":F.value,"onUpdate:sortBy":[d[4]||(d[4]=p=>F.value=p),d[7]||(d[7]=p=>r(!1))],page:P.value,"onUpdate:page":[d[5]||(d[5]=p=>P.value=p),d[8]||(d[8]=p=>r(!1))],items:q.value,headers:l.$vuetify.display.xs?A:l.$vuetify.display.sm?_:l.$vuetify.display.md?E:T,loading:f.value,"items-length":I.value,search:y.value,hover:"",class:"mx-auto mb-15 px-2 px-md-8 text-body-1 rounded-sm"},{top:t(()=>[e(h,{modelValue:y.value,"onUpdate:modelValue":d[0]||(d[0]=p=>y.value=p),onClickAppend:d[1]||(d[1]=p=>r(!0)),onKeydown:d[2]||(d[2]=Fe(p=>r(!0),["enter"])),"max-width":"100%",class:"my-5"},null,8,["modelValue"])]),"item.image":t(({item:p})=>[e(g,{to:"/event/"+p._id,style:{"text-decoration":"none"}},{default:t(()=>[e(Te,{src:p.image,class:"table-image my-2"},null,8,["src"])]),_:2},1032,["to"])]),"item.title":t(({item:p})=>[o("td",St,V(p.title),1)]),"item.address":t(({item:p})=>[o("td",Ct,V(p.address),1)]),"item.category":t(({item:p})=>[o("td",qt,V(p.category.join(" , ")),1)]),"item.date":t(({item:p})=>[o("td",Mt,V(p.date),1)]),"item.organizer":t(({item:p})=>[o("td",Tt,V(p.organizer),1)]),"item.description":t(({item:p})=>[o("td",It,V(p.description),1)]),"item.action":t(({item:p})=>[o("td",zt,[x(V(p.action)+" ",1),e(j,{icon:"mdi-pencil",variant:"text",color:"blue-grey-darken-1",onClick:Je=>z(p)},null,8,["onClick"]),e(j,{icon:"mdi-delete",variant:"text",color:"red-darken-4",onClick:Je=>ke(p)},null,8,["onClick"])])]),_:2},1032,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]),e(we,{modelValue:W.value,"onUpdate:modelValue":d[9]||(d[9]=p=>W.value=p),"max-width":"400"},{default:t(()=>[e(ce,null,{default:t(()=>[e(_e,{class:"headline"},{default:t(()=>[x("確認刪除")]),_:1}),e(he,null,{default:t(()=>[x("你確定要刪除這個項目嗎？")]),_:1}),e(Me,null,{default:t(()=>[e(Xe),e(j,{color:"grey",text:"",onClick:ge},{default:t(()=>[x("取消")]),_:1}),e(j,{color:"red",text:"",onClick:ve},{default:t(()=>[x("刪除")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(we,{"max-width":"700",modelValue:c.value.open,"onUpdate:modelValue":d[19]||(d[19]=p=>c.value.open=p)},{default:t(()=>[e(ce,null,{default:t(()=>[e(Ee,null,{default:t(()=>[e(_e,{class:"font-weight-black text-center text-h4"},{default:t(()=>[x("修改活動貼文")]),_:1}),e(he,null,{default:t(()=>[e(Ge,{onSubmit:Ke(s(ne),["prevent"]),disabled:s(U)},{default:t(()=>[e(N,null,{default:t(()=>[e(i,{cols:"1"}),e(i,{cols:"10",md:"12"},{default:t(()=>[e(b,{modelValue:M.value,"onUpdate:modelValue":d[10]||(d[10]=p=>M.value=p),"raw-model-value":S.value,"onUpdate:rawModelValue":d[11]||(d[11]=p=>S.value=p),accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},ref_key:"fileAgent",ref:Q},null,8,["modelValue","raw-model-value"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,{cols:"4",class:"my-auto text-center dialog-col"},{default:t(()=>[Dt]),_:1}),e(i,{cols:"8"},{default:t(()=>[e(a,{modelValue:s(J).value.value,"onUpdate:modelValue":d[12]||(d[12]=p=>s(J).value.value=p),"error-messages":s(J).errorMessage.value,density:l.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",class:"my-auto text-center dialog-col"},{default:t(()=>[At]),_:1}),e(i,{cols:"8"},{default:t(()=>[e(a,{modelValue:s(te).value.value,"onUpdate:modelValue":d[13]||(d[13]=p=>s(te).value.value=p),"error-messages":s(te).errorMessage.value,density:l.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",class:"my-auto text-center dialog-col"},{default:t(()=>[Bt]),_:1}),e(i,{cols:"8"},{default:t(()=>[e(lt,{modelValue:s(le).value.value,"onUpdate:modelValue":d[14]||(d[14]=p=>s(le).value.value=p),"error-messages":s(le).errorMessage.value,label:"選擇",variant:"outlined",density:l.$vuetify.display.xs?"compact":"comfortable",dense:"",items:O,"hide-details":"",multiple:""},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",class:"my-auto text-center px-0 dialog-col"},{default:t(()=>[Ft]),_:1}),e(i,{cols:"8"},{default:t(()=>[e(a,{modelValue:s(ee).value.value,"onUpdate:modelValue":d[15]||(d[15]=p=>s(ee).value.value=p),"error-messages":s(ee).errorMessage.value,density:l.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",class:"my-auto text-center dialog-col"},{default:t(()=>[Rt]),_:1}),e(i,{cols:"8"},{default:t(()=>[e(a,{modelValue:s(ae).value.value,"onUpdate:modelValue":d[16]||(d[16]=p=>s(ae).value.value=p),"error-messages":s(ae).errorMessage.value,density:l.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",class:"text-center dialog-col mt-3"},{default:t(()=>[Et]),_:1}),e(i,{cols:"8"},{default:t(()=>[e(nt,{"auto-grow":"",label:"輸入文字",variant:"outlined",clearable:"","hide-details":"",modelValue:s(pe).value.value,"onUpdate:modelValue":d[17]||(d[17]=p=>s(pe).value.value=p),"error-messages":s(pe).errorMessage.value,density:l.$vuetify.display.xs?"compact":"comfortable",rows:l.$vuetify.display.xs?"3":"4"},null,8,["modelValue","error-messages","density","rows"])]),_:1})]),_:1}),e(Me,null,{default:t(()=>[o("div",Lt,[e(j,{variant:"text",class:"rounded-xl b-1 bg-accent",density:"comfortable",type:"submit",loading:s(U)},{default:t(()=>[x("送出")]),_:1},8,["loading"]),e(j,{text:"取消",variant:"text",class:"rounded-xl b-1 bg-info",density:"comfortable",onClick:d[18]||(d[18]=p=>K())})])]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Ht=De(jt,[["__scopeId","data-v-7aeec39a"]]),Ye=k=>(Ie("data-v-fd691d31"),k=k(),ze(),k),Kt={class:"b-1 mx-auto share-container"},Ot=Ye(()=>o("h2",{class:"bg-accent text-center mx-auto bb-1 py-1"},"我要分享",-1)),Nt={class:"table-name text-left"},Gt={class:"table-quantity text-center"},Wt={class:"table-category text-center"},Xt={class:"py-2 table-description"},Qt=Ye(()=>o("label",{class:"form-label"},"物資名稱",-1)),Yt={class:"form-label"},Zt=Ye(()=>o("label",{class:"form-label"},"物資類別",-1)),Jt={class:"form-label"},el=Ye(()=>o("label",{class:"form-label"},"單位名稱",-1)),tl={class:"mx-auto"},ll={__name:"shareTable",props:{cardTitle:{type:String,default:"發布需求"},numberTitle:{type:String,default:"需求量"},descriptionTitle:{type:String,default:"需求介紹"},type:{type:String,default:"share"}},setup(k){const{api:me,apiAuth:H}=Pe(),w=Ue(),Q=k,M=n(null),S=n([]),C=n([]),F=n(8),P=n([{key:"createdAt",order:"desc"}]),q=n(1),T=n([]),A=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"名稱",align:"center",sortable:!1,key:"name"},{title:"數量",align:"center",sortable:!1,key:"quantity"},{title:"分類",align:"center",sortable:!0,key:"category"},{title:"概況",align:"center",sortable:!1,key:"description"},{title:"操作",align:"center",sortable:!1,key:"action"}],_=[{title:"名稱",align:"center",sortable:!1,key:"name"},{title:"分類",align:"center",sortable:!0,key:"category"},{title:"操作",align:"center",sortable:!1,key:"action"}],E=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"名稱",align:"center",sortable:!1,key:"name"},{title:"數量",align:"center",sortable:!1,key:"quantity"},{title:"分類",align:"center",sortable:!0,key:"category"},{title:"操作",align:"center",sortable:!1,key:"action"}],f=n(!0),I=n(0),y=n(""),r=async m=>{var l,d,h,g;m&&(q.value=1),f.value=!0;try{const{data:b}=await H.get("/user/share",{params:{page:q.value,itemsPerPage:F.value,sortBy:((l=P.value[0])==null?void 0:l.key)||"createdAt",sortOrder:((d=P.value[0])==null?void 0:d.order)||"desc",search:y.value}});console.log(b),T.value.splice(0,T.value.length,...b.result.data),I.value=b.result.total}catch(b){console.log(b),w({text:((g=(h=b==null?void 0:b.response)==null?void 0:h.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red"}})}f.value=!1};r();const O=["食品","服飾配件","日用品","家具","輔具","教育用品","嬰幼兒用品","電器","休閒用品","其他"],c=n({open:!1,id:""}),z=m=>{c.value.open=!0,c.value.id=m._id,J.value.value=m.name,ee.value.value=m.quantity,te.value.value=m.category,le.value.value=m.description,ae.value.value=m.organizer},K=()=>{c.value.open=!1,oe(),M.value.deleteFileRecord()},G=Oe({name:L().required("物品名稱必填"),quantity:ot().min(1,"物品數量不符").required("物品數量必填"),category:L().required("物品分類必填").test("isCategory","商品分類錯誤",m=>O.includes(m)),description:L().required("物資介紹必填"),organizer:L().required("單位名稱必填")}),{handleSubmit:Z,isSubmitting:U,resetForm:oe}=Ne({validationSchema:G,initialValues:{name:"",quantity:"0",category:"",description:"",organizer:""}}),J=B("name"),ee=B("quantity"),te=B("category"),le=B("description"),ae=B("organizer"),pe=Z(async m=>{var l,d,h;if(!((l=S.value[0])!=null&&l.error)&&!(S.value.length<1))try{const g=new FormData;g.append("name",m.name),g.append("quantity",m.quantity),g.append("category",m.category),g.append("description",m.description),g.append("organizer",m.organizer),g.append("type",Q.type),S.value.length>0&&g.append("image",S.value[0].file),console.log(g),await H.patch("/material/"+c.value.id,g),w({text:"新增成功",snackbarProps:{color:"green"}}),K(),r()}catch(g){console.log(g),w({text:((h=(d=g==null?void 0:g.response)==null?void 0:d.data)==null?void 0:h.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),ne=n(!1),W=n(null);je(y,()=>{r(!0)});const de=m=>{W.value=m,ne.value=!0},ke=()=>{ne.value=!1,W.value=null},ge=async()=>{W.value&&(await ve(W.value),ne.value=!1,W.value=null)},ve=async m=>{var l,d;try{await H.delete(`/Material/${m._id}`),w({text:"刪除成功",snackbarProps:{color:"green"}}),r(!0)}catch(h){console.log(h),w({text:((d=(l=h==null?void 0:h.response)==null?void 0:l.data)==null?void 0:d.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return(m,l)=>{const d=He,h=xe("router-link"),g=xe("vue-file-agent"),b=Qe;return $(),R(X,null,[o("div",Kt,[Ot,e(Re,{"items-per-page":F.value,"onUpdate:itemsPerPage":[l[3]||(l[3]=a=>F.value=a),l[6]||(l[6]=a=>r(!1))],"sort-by":P.value,"onUpdate:sortBy":[l[4]||(l[4]=a=>P.value=a),l[7]||(l[7]=a=>r(!1))],page:q.value,"onUpdate:page":[l[5]||(l[5]=a=>q.value=a),l[8]||(l[8]=a=>r(!1))],items:T.value,headers:m.$vuetify.display.xs||m.$vuetify.display.sm?_:m.$vuetify.display.md?E:A,loading:f.value,"items-length":I.value,search:y.value,hover:"",class:"mx-auto mb-15 px-2 px-md-8 text-body-1 rounded-sm"},{top:t(()=>[e(d,{class:"my-5",modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=a=>y.value=a),onClickAppend:l[1]||(l[1]=a=>r(!0)),onKeydown:l[2]||(l[2]=Fe(a=>r(!0),["enter"])),"max-width":"100%"},null,8,["modelValue"])]),"item.image":t(({item:a})=>[e(h,{to:"/material/share/"+a._id,style:{"text-decoration":"none"}},{default:t(()=>[e(Te,{src:a.image,class:"table-image my-2"},null,8,["src"])]),_:2},1032,["to"])]),"item.name":t(({item:a})=>[o("td",Nt,V(a.name),1)]),"item.quantity":t(({item:a})=>[o("td",Gt,V(a.quantity),1)]),"item.category":t(({item:a})=>[o("td",Wt,V(a.category),1)]),"item.description":t(({item:a})=>[o("td",Xt,V(a.description),1)]),"item.action":t(({item:a})=>[o("td",null,[x(V(a.action)+" ",1),e(j,{icon:"mdi-pencil",variant:"text",color:"blue-grey-darken-1",onClick:p=>z(a)},null,8,["onClick"]),e(j,{icon:"mdi-delete",variant:"text",color:"red-darken-4",onClick:p=>de(a)},null,8,["onClick"])])]),_:2},1032,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]),e(we,{modelValue:ne.value,"onUpdate:modelValue":l[9]||(l[9]=a=>ne.value=a),"max-width":"400"},{default:t(()=>[e(ce,null,{default:t(()=>[e(_e,{class:"headline"},{default:t(()=>[x("確認刪除")]),_:1}),e(he,null,{default:t(()=>[x("你確定要刪除這個項目嗎？")]),_:1}),e(Me,null,{default:t(()=>[e(Xe),e(j,{color:"grey",text:"",onClick:ke},{default:t(()=>[x("取消")]),_:1}),e(j,{color:"red",text:"",onClick:ge},{default:t(()=>[x("刪除")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(we,{"max-width":"600",modelValue:c.value.open,"onUpdate:modelValue":l[18]||(l[18]=a=>c.value.open=a)},{default:t(()=>[e(ce,null,{default:t(()=>[e(Ee,null,{default:t(()=>[e(_e,{class:"font-weight-black text-center text-h4"},{default:t(()=>[x(V(k.cardTitle),1)]),_:1}),e(he,null,{default:t(()=>[e(Ge,{onSubmit:Ke(s(pe),["prevent"]),disabled:s(U)},{default:t(()=>[e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[e(g,{modelValue:S.value,"onUpdate:modelValue":l[10]||(l[10]=a=>S.value=a),"raw-model-value":C.value,"onUpdate:rawModelValue":l[11]||(l[11]=a=>C.value=a),accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},ref_key:"fileAgent",ref:M},null,8,["modelValue","raw-model-value"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,{cols:"4",md:"3",class:"my-auto text-left ps-6"},{default:t(()=>[Qt]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(b,{modelValue:s(J).value.value,"onUpdate:modelValue":l[12]||(l[12]=a=>s(J).value.value=a),"error-messages":s(J).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-left ps-6"},{default:t(()=>[o("label",Yt,V(k.numberTitle),1)]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(b,{modelValue:s(ee).value.value,"onUpdate:modelValue":l[13]||(l[13]=a=>s(ee).value.value=a),"error-messages":s(ee).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-left ps-6"},{default:t(()=>[Zt]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(lt,{modelValue:s(te).value.value,"onUpdate:modelValue":l[14]||(l[14]=a=>s(te).value.value=a),"error-messages":s(te).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable",label:"選擇",variant:"outlined",dense:"",items:O,"hide-details":""},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-left ps-6"},{default:t(()=>[o("label",Jt,V(k.descriptionTitle),1)]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(b,{modelValue:s(le).value.value,"onUpdate:modelValue":l[15]||(l[15]=a=>s(le).value.value=a),"error-messages":s(le).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-left ps-6"},{default:t(()=>[el]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(b,{modelValue:s(ae).value.value,"onUpdate:modelValue":l[16]||(l[16]=a=>s(ae).value.value=a),"error-messages":s(ae).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1})]),_:1}),e(Me,null,{default:t(()=>[o("div",tl,[e(j,{variant:"text",class:"rounded-xl b-1 bg-accent",density:"comfortable",type:"submit",loading:s(U)},{default:t(()=>[x("送出")]),_:1},8,["loading"]),e(j,{text:"取消",variant:"text",class:"rounded-xl b-1 bg-info",density:"comfortable",onClick:l[17]||(l[17]=a=>K())})])]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},al=De(ll,[["__scopeId","data-v-fd691d31"]]),Ze=k=>(Ie("data-v-c77005df"),k=k(),ze(),k),sl={class:"b-1 mx-auto find-container"},ol=Ze(()=>o("h2",{class:"bg-accent text-center mx-auto bb-1 py-1"},"我要募資",-1)),nl={class:"table-name text-left"},rl={class:"table-quantity text-center"},dl={class:"table-category text-center"},il={class:"py-2 table-description"},ul={class:"item.action text-center"},cl=Ze(()=>o("label",{class:"form-label"},"物資名稱",-1)),ml={class:"form-label"},pl=Ze(()=>o("label",{class:"form-label"},"物資類別",-1)),vl={class:"form-label"},gl=Ze(()=>o("label",{class:"form-label"},"單位名稱",-1)),fl={class:"mx-auto"},yl={__name:"findTable",props:{cardTitle:{type:String,default:"發布需求"},numberTitle:{type:String,default:"需求量"},descriptionTitle:{type:String,default:"需求介紹"},type:{type:String,default:"share"}},setup(k){const{api:me,apiAuth:H}=Pe(),w=Ue(),Q=k,M=n(null),S=n([]),C=n([]),F=n(8),P=n([{key:"createdAt",order:"desc"}]),q=n(1),T=n([]),A=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"名稱",align:"center",sortable:!1,key:"name"},{title:"數量",align:"center",sortable:!1,key:"quantity"},{title:"分類",align:"center",sortable:!0,key:"category"},{title:"概況",align:"center",sortable:!1,key:"description"},{title:"操作",align:"center",sortable:!1,key:"action"}],_=[{title:"名稱",align:"center",sortable:!1,key:"name"},{title:"分類",align:"center",sortable:!0,key:"category"},{title:"操作",align:"center",sortable:!1,key:"action"}],E=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"名稱",align:"center",sortable:!1,key:"name"},{title:"數量",align:"center",sortable:!1,key:"quantity"},{title:"分類",align:"center",sortable:!0,key:"category"},{title:"操作",align:"center",sortable:!1,key:"action"}],f=n(!0),I=n(0),y=n(""),r=async m=>{var l,d,h,g;m&&(q.value=1),f.value=!0;try{const{data:b}=await H.get("/user/find",{params:{page:q.value,itemsPerPage:F.value,sortBy:((l=P.value[0])==null?void 0:l.key)||"createdAt",sortOrder:((d=P.value[0])==null?void 0:d.order)||"desc",search:y.value}});T.value.splice(0,T.value.length,...b.result.data),I.value=b.result.total,console.log(T.value)}catch(b){console.log(b),w({text:((g=(h=b==null?void 0:b.response)==null?void 0:h.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red"}})}f.value=!1};r();const O=["食品","服飾配件","日用品","家具","輔具","教育用品","嬰幼兒用品","電器","休閒用品","其他"],c=n({open:!1,id:""}),z=m=>{c.value.open=!0,c.value.id=m._id,J.value.value=m.name,ee.value.value=m.quantity,te.value.value=m.category,le.value.value=m.description,ae.value.value=m.organizer},K=()=>{c.value.open=!1,oe(),M.value.deleteFileRecord()},G=Oe({name:L().required("物品名稱必填"),quantity:ot().min(1,"物品數量不符").required("物品數量必填"),category:L().required("物品分類必填").test("isCategory","商品分類錯誤",m=>O.includes(m)),description:L().required("物資介紹必填"),organizer:L().required("單位名稱必填")}),{handleSubmit:Z,isSubmitting:U,resetForm:oe}=Ne({validationSchema:G,initialValues:{name:"",quantity:"0",category:"",description:"",organizer:""}}),J=B("name"),ee=B("quantity"),te=B("category"),le=B("description"),ae=B("organizer"),pe=Z(async m=>{var l,d,h;if(!((l=S.value[0])!=null&&l.error)&&!(S.value.length<1))try{const g=new FormData;g.append("name",m.name),g.append("quantity",m.quantity),g.append("category",m.category),g.append("description",m.description),g.append("organizer",m.organizer),g.append("type",Q.type),S.value.length>0&&g.append("image",S.value[0].file),console.log(g),await H.patch("/material/"+c.value.id,g),w({text:"新增成功",snackbarProps:{color:"green"}}),r(),K()}catch(g){console.log(g),w({text:((h=(d=g==null?void 0:g.response)==null?void 0:d.data)==null?void 0:h.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),ne=n(!1),W=n(null);je(y,()=>{r(!0)});const de=m=>{W.value=m,ne.value=!0},ke=()=>{ne.value=!1,W.value=null},ge=async()=>{W.value&&(await ve(W.value),ne.value=!1,W.value=null)},ve=async m=>{var l,d;try{await H.delete(`/Material/${m._id}`),w({text:"刪除成功",snackbarProps:{color:"green"}}),r(!0)}catch(h){console.log(h),w({text:((d=(l=h==null?void 0:h.response)==null?void 0:l.data)==null?void 0:d.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return(m,l)=>{const d=He,h=xe("router-link"),g=xe("vue-file-agent"),b=Qe;return $(),R(X,null,[o("div",sl,[ol,e(Re,{"items-per-page":F.value,"onUpdate:itemsPerPage":[l[3]||(l[3]=a=>F.value=a),l[6]||(l[6]=a=>r(!1))],"sort-by":P.value,"onUpdate:sortBy":[l[4]||(l[4]=a=>P.value=a),l[7]||(l[7]=a=>r(!1))],page:q.value,"onUpdate:page":[l[5]||(l[5]=a=>q.value=a),l[8]||(l[8]=a=>r(!1))],items:T.value,headers:m.$vuetify.display.xs||m.$vuetify.display.sm?_:m.$vuetify.display.md?E:A,loading:f.value,"items-length":I.value,search:y.value,hover:"",class:"mx-auto mb-15 px-2 px-md-8 text-body-1 rounded-sm"},{top:t(()=>[e(d,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=a=>y.value=a),onClickAppend:l[1]||(l[1]=a=>r(!0)),onKeydown:l[2]||(l[2]=Fe(a=>r(!0),["enter"])),"max-width":"100%",class:"my-5"},null,8,["modelValue"])]),"item.image":t(({item:a})=>[e(h,{to:"/material/find/"+a._id,style:{"text-decoration":"none"}},{default:t(()=>[e(Te,{src:a.image,class:"table-image my-2"},null,8,["src"])]),_:2},1032,["to"])]),"item.name":t(({item:a})=>[o("td",nl,V(a.name),1)]),"item.quantity":t(({item:a})=>[o("td",rl,V(a.quantity),1)]),"item.category":t(({item:a})=>[o("td",dl,V(a.category),1)]),"item.description":t(({item:a})=>[o("td",il,V(a.description),1)]),"item.action":t(({item:a})=>[o("td",ul,[x(V(a.action)+" ",1),e(j,{icon:"mdi-pencil",variant:"text",color:"blue-grey-darken-1",onClick:p=>z(a)},null,8,["onClick"]),e(j,{icon:"mdi-delete",variant:"text",color:"red-darken-4",onClick:p=>de(a)},null,8,["onClick"])])]),_:2},1032,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]),e(we,{modelValue:ne.value,"onUpdate:modelValue":l[9]||(l[9]=a=>ne.value=a),"max-width":"400"},{default:t(()=>[e(ce,null,{default:t(()=>[e(_e,{class:"headline"},{default:t(()=>[x("確認刪除")]),_:1}),e(he,null,{default:t(()=>[x("你確定要刪除這個項目嗎？")]),_:1}),e(Me,null,{default:t(()=>[e(Xe),e(j,{color:"grey",text:"",onClick:ke},{default:t(()=>[x("取消")]),_:1}),e(j,{color:"red",text:"",onClick:ge},{default:t(()=>[x("刪除")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(we,{"max-width":"600",modelValue:c.value.open,"onUpdate:modelValue":l[18]||(l[18]=a=>c.value.open=a)},{default:t(()=>[e(ce,null,{default:t(()=>[e(Ee,null,{default:t(()=>[e(_e,{class:"font-weight-black text-center text-h4"},{default:t(()=>[x(V(k.cardTitle),1)]),_:1}),e(he,null,{default:t(()=>[e(Ge,{onSubmit:Ke(s(pe),["prevent"]),disabled:s(U)},{default:t(()=>[e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[e(g,{modelValue:S.value,"onUpdate:modelValue":l[10]||(l[10]=a=>S.value=a),"raw-model-value":C.value,"onUpdate:rawModelValue":l[11]||(l[11]=a=>C.value=a),accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},ref_key:"fileAgent",ref:M},null,8,["modelValue","raw-model-value"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,{cols:"4",md:"3",class:"my-auto text-left ps-2 ps-md-6"},{default:t(()=>[cl]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(b,{modelValue:s(J).value.value,"onUpdate:modelValue":l[12]||(l[12]=a=>s(J).value.value=a),"error-messages":s(J).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-left ps-2 ps-md-6"},{default:t(()=>[o("label",ml,V(k.numberTitle),1)]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(b,{modelValue:s(ee).value.value,"onUpdate:modelValue":l[13]||(l[13]=a=>s(ee).value.value=a),"error-messages":s(ee).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-left ps-2 ps-md-6"},{default:t(()=>[pl]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(lt,{modelValue:s(te).value.value,"onUpdate:modelValue":l[14]||(l[14]=a=>s(te).value.value=a),"error-messages":s(te).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable",label:"選擇",variant:"outlined",dense:"",items:O,"hide-details":""},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-left ps-2 ps-md-6"},{default:t(()=>[o("label",vl,V(k.descriptionTitle),1)]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(b,{modelValue:s(le).value.value,"onUpdate:modelValue":l[15]||(l[15]=a=>s(le).value.value=a),"error-messages":s(le).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-left ps-2 ps-md-6"},{default:t(()=>[gl]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(b,{modelValue:s(ae).value.value,"onUpdate:modelValue":l[16]||(l[16]=a=>s(ae).value.value=a),"error-messages":s(ae).errorMessage.value,density:m.$vuetify.display.xs?"compact":"comfortable"},null,8,["modelValue","error-messages","density"])]),_:1})]),_:1}),e(Me,null,{default:t(()=>[o("div",fl,[e(j,{variant:"text",class:"rounded-xl b-1 bg-accent",density:"comfortable",type:"submit",loading:s(U)},{default:t(()=>[x("送出")]),_:1},8,["loading"]),e(j,{text:"取消",variant:"text",class:"rounded-xl b-1 bg-info",density:"comfortable",onClick:l[17]||(l[17]=a=>K())})])]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},bl=De(yl,[["__scopeId","data-v-c77005df"]]),xl=k=>(Ie("data-v-d5116266"),k=k(),ze(),k),_l={class:"b-1 account-container text-center rounded-lg mx-auto"},kl={id:"img",style:{width:"170px",height:"170px"},class:"rounded-circle d-flex justify-center align-center bg-grey-lighten-5 mx-auto my-5 b-1"},Vl=xl(()=>o("div",{id:"upload"},"編輯",-1)),$l={key:0,style:{color:"#616161"},class:"info-text pl-0 pl-sm-4 pl-md-0"},hl={style:{color:"#616161"},class:"info-text pl-0 pl-sm-4 pl-md-0"},wl={key:0,style:{color:"#616161"},class:"info-text pl-0 pl-sm-4 pl-md-0"},Ul={__name:"accountTable",setup(k){const me=pt(),{apiAuth:H}=Pe(),w=Ue(),Q=n(null),M=n([]),S=n([]),C=n([]);(async()=>{var z,K;try{const{data:G}=await H.get("/user/profile");C.value=[G.result],C.value[0].password="********",C.value[0].newUsername=C.value[0].username,C.value[0].newPassword="",console.log(C.value),console.log(M.value)}catch(G){w({text:((K=(z=G==null?void 0:G.response)==null?void 0:z.data)==null?void 0:K.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const P=Oe({newUsername:L().min(3,"服務單位長度不符").max(20,"服務單位長度不符"),newPassword:L().min(6,"使用者密碼長度不符").max(20,"使用者密碼長度不符")}),{handleSubmit:q,isSubmitting:T}=Ne({validationSchema:P}),{value:A,errorMessage:_}=B("newUsername"),{value:E,errorMessage:f}=B("newPassword"),I=q(async()=>{var z,K;try{const G=C.value[0],Z=new FormData;A.value&&A.value!==G.username&&Z.append("username",A.value),E.value&&E.value!==""&&Z.append("password",E.value),M.value.length!==0&&Z.append("image",M.value[0].file);for(let[oe,J]of Z.entries())console.log(`${oe}:`,J);if(Z.get("username")===null&&Z.get("password")===null&&Z.get("image")===null){w({text:"沒有任何變更",snackbarProps:{color:"accent"}});return}console.log(Z);const U=await H.patch("/user/change",Z);U.data.success?(w({text:"資料修改成功",snackbarProps:{color:"green"}}),me.push("/")):w({text:U.data.message||"發生錯誤",snackbarProps:{color:"red"}})}catch(G){w({text:((K=(z=G==null?void 0:G.response)==null?void 0:z.data)==null?void 0:K.message)||"發生錯誤",snackbarProps:{color:"red"}})}}),y=z=>{z.isEditing=!z.isEditing},r=z=>{z.isEditing=!1},O=z=>{z.passwordisEditing=!z.passwordisEditing},c=z=>{z.passwordisEditing=!1};return(z,K)=>{const G=xe("vue-file-agent"),Z=_t;return $(),ie(ce,{flat:""},{default:t(()=>[e(Ge,{onSubmit:Ke(s(I),["prevent"]),disabled:s(T)},{default:t(()=>[e(he,{class:"pa-0 pa-sm-2"},{default:t(()=>[o("div",_l,[e(rt,{color:"info",class:"mb-10 rounded-t-lg bb-1",prominent:""},{default:t(()=>[e(dt,{class:"ms-0 font-weight-bold",style:{"font-size":"23px",color:"#616161"}},{default:t(()=>[x("基本資料")]),_:1})]),_:1}),e(G,{id:"account",class:"d-flex justify-center mb-5",accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"上傳大頭照","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},modelValue:M.value,"onUpdate:modelValue":K[0]||(K[0]=U=>M.value=U),"raw-model-value":S.value,"onUpdate:rawModelValue":K[1]||(K[1]=U=>S.value=U),ref_key:"fileAgent",ref:Q},null,8,["modelValue","raw-model-value"]),($(!0),R(X,null,ue(C.value,U=>($(),R(X,{key:U.id},[o("div",kl,[e(Te,{src:U.avatar,cover:""},null,8,["src"])]),Vl],64))),128)),e(Ee,null,{default:t(()=>[e(N,{class:"text-left justify-center"},{default:t(()=>[e(i,{cols:"0",md:"1",lg:"2"}),e(i,{cols:"5",sm:"4",md:"3",lg:"3",class:"info-text my-auto pl-5 pl-sm-13 pl-md-0 pl-lg-12"},{default:t(()=>[x("服務單位")]),_:1}),($(!0),R(X,null,ue(C.value,U=>($(),R(X,{key:U.id},[e(i,{cols:"4",sm:"5",md:"4",lg:"4",class:"px-0 my-auto"},{default:t(()=>[U.isEditing?($(),ie(at,{key:1,class:"my-auto",variant:"outlined","single-line":"",density:"compact",clearable:"",dense:"",modelValue:s(A),"onUpdate:modelValue":K[2]||(K[2]=oe=>tt(A)?A.value=oe:null),"error-messages":s(_),onKeydown:Fe(oe=>r(U),["enter"]),"hide-details":""},null,8,["modelValue","error-messages","onKeydown"])):($(),R("p",$l,V(U.username),1))]),_:2},1024),e(i,{cols:"2",sm:"3",md:"2",lg:"2",class:"text-center text-sm-left"},{default:t(()=>[e(j,{onClick:oe=>y(U),icon:"mdi-pencil",variant:"text",color:"blue-grey-darken-1"},null,8,["onClick"])]),_:2},1024)],64))),128)),e(Ve)]),_:1}),e(N,{class:"text-left justify-center"},{default:t(()=>[e(i,{cols:"5",sm:"4",md:"3",lg:"3",class:"info-text my-auto pl-5 pl-sm-13 pl-md-0 pl-lg-12 d-flex align-center"},{default:t(()=>[x("電子信箱")]),_:1}),($(!0),R(X,null,ue(C.value,U=>($(),ie(i,{key:U.id,cols:"6",sm:"8",md:"5",lg:"4",class:"my-2 px-0"},{default:t(()=>[o("p",hl,V(U.email),1)]),_:2},1024))),128)),e(Ve)]),_:1}),e(N,{class:"text-left justify-center"},{default:t(()=>[e(i,{cols:"0",md:"1",lg:"2",class:"pa-0"}),e(i,{cols:"5",sm:"4",md:"3",lg:"3",class:"info-text my-auto pl-5 pl-sm-13 pl-md-0 pl-lg-12"},{default:t(()=>[x("密碼")]),_:1}),($(!0),R(X,null,ue(C.value,U=>($(),R(X,{key:U.id},[e(i,{cols:"4",sm:"5",md:"4",lg:"4",class:"px-0 my-auto"},{default:t(()=>[U.passwordisEditing?($(),ie(at,{key:1,class:"info-text",variant:"outlined","single-line":"",density:"compact",clearable:"",dense:"",modelValue:s(E),"onUpdate:modelValue":K[3]||(K[3]=oe=>tt(E)?E.value=oe:null),"error-messages":s(f),onKeydown:Fe(oe=>c(U),["enter"]),"hide-details":""},null,8,["modelValue","error-messages","onKeydown"])):($(),R("p",wl,V(U.password),1))]),_:2},1024),e(i,{cols:"2",sm:"3",md:"2",lg:"2",class:"text-center text-sm-left"},{default:t(()=>[e(j,{onClick:oe=>O(U),icon:"mdi-pencil",variant:"text",color:"blue-grey-darken-1"},null,8,["onClick"])]),_:2},1024)],64))),128)),e(Ve)]),_:1}),e(N,null,{default:t(()=>[e(i,{class:"my-md-5"},{default:t(()=>[e(Z,{text:"提交",class:"mx-auto my-1 bg-accent text-body-1 d-inline-block",width:"80",height:"30"})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1})}}},Pl=De(Ul,[["__scopeId","data-v-d5116266"]]),Sl=k=>(Ie("data-v-84fac050"),k=k(),ze(),k),Cl={class:"b-1 mx-auto my-8 share-container"},ql=Sl(()=>o("h2",{class:"bb-1 bg-accent text-center mx-auto py-1 mb-5"},"索取者聯絡資訊",-1)),Ml={__name:"shareReplyTable",setup(k){const{api:me,apiAuth:H}=Pe(),w=Ue(),Q=n(8),M=n([{key:"createdAt",order:"desc"}]),S=n(1),C=n([]),F=[{title:"物資",align:"center",sortable:!1,key:"image"},{title:"索取者聯絡資訊",align:"center",sortable:!1,key:"donations"}],P=n(!0),q=n(0),T=async A=>{var _,E,f,I;A&&(S.value=1),P.value=!0;try{const{data:y}=await H.get("/user/share",{params:{page:S.value,itemsPerPage:Q.value,sortBy:((_=M.value[0])==null?void 0:_.key)||"createdAt",sortOrder:((E=M.value[0])==null?void 0:E.order)||"desc"}});console.log(y.result.data);const r=y.result.data.filter(O=>O.donations&&O.donations.length>0);C.value.splice(0,C.value.length,...r),q.value=r.length}catch(y){console.log(y),w({text:((I=(f=y==null?void 0:y.response)==null?void 0:f.data)==null?void 0:I.message)||"發生錯誤",snackbarProps:{color:"red"}})}P.value=!1};return T(),(A,_)=>{const E=xe("router-link");return $(),R("div",Cl,[ql,e(Re,{"items-per-page":Q.value,"onUpdate:itemsPerPage":[_[0]||(_[0]=f=>Q.value=f),_[3]||(_[3]=f=>T(!1))],"sort-by":M.value,"onUpdate:sortBy":[_[1]||(_[1]=f=>M.value=f),_[4]||(_[4]=f=>T(!1))],page:S.value,"onUpdate:page":[_[2]||(_[2]=f=>S.value=f),_[5]||(_[5]=f=>T(!1))],items:C.value,headers:F,loading:P.value,"items-length":q.value,hover:"",class:"mx-auto mb-15 px-2 px-md-8 text-body-1 rounded-sm"},{"item.image":t(({item:f})=>[e(E,{to:"/material/share/"+f._id,style:{"text-decoration":"none"}},{default:t(()=>[e(Te,{src:f.image,class:"my-5 img"},null,8,["src"])]),_:2},1032,["to"])]),"item.donations":t(({item:f})=>[($(!0),R(X,null,ue(f.donations,(I,y)=>($(),ie(ce,{class:"mb-2",outlined:"",variant:"text",key:y},{default:t(()=>[e(_e,null,{default:t(()=>[e(N,{"no-gutters":"",class:"flex-column"},{default:t(()=>[e(i,{cols:"3",class:"form-label text-left my-1"},{default:t(()=>[x("數量: "+V(I.quantity),1)]),_:2},1024),e(i,{cols:"5",class:"form-label text-left my-1"},{default:t(()=>[x("服務單位: "+V(I.donator),1)]),_:2},1024),e(i,{cols:"4",class:"form-label text-left my-1"},{default:t(()=>[x("聯絡電話: "+V(I.phone),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length"])])}}},Tl=De(Ml,[["__scopeId","data-v-84fac050"]]),Il=k=>(Ie("data-v-832273f7"),k=k(),ze(),k),zl={class:"b-1 mx-auto find-container"},Dl=Il(()=>o("h2",{class:"bb-1 bg-accent text-center mx-auto py-1 mb-5"},"捐贈者聯絡資訊",-1)),Al={__name:"findReplyTable",setup(k){const{api:me,apiAuth:H}=Pe(),w=Ue(),Q=n(8),M=n([{key:"createdAt",order:"desc"}]),S=n(1),C=n([]),F=[{title:"物資",align:"center",sortable:!1,key:"image"},{title:"捐贈者聯絡資訊",align:"center",sortable:!1,key:"donations"}],P=n(!0),q=n(0),T=async A=>{var _,E,f,I;A&&(S.value=1),P.value=!0;try{const{data:y}=await H.get("/user/find",{params:{page:S.value,itemsPerPage:Q.value,sortBy:((_=M.value[0])==null?void 0:_.key)||"createdAt",sortOrder:((E=M.value[0])==null?void 0:E.order)||"desc"}});console.log(y.result.data);const r=y.result.data.filter(O=>O.donations&&O.donations.length>0);C.value.splice(0,C.value.length,...r),q.value=r.length}catch(y){console.log(y),w({text:((I=(f=y==null?void 0:y.response)==null?void 0:f.data)==null?void 0:I.message)||"發生錯誤",snackbarProps:{color:"red"}})}P.value=!1};return T(),(A,_)=>{const E=xe("router-link");return $(),R("div",zl,[Dl,e(Re,{"items-per-page":Q.value,"onUpdate:itemsPerPage":[_[0]||(_[0]=f=>Q.value=f),_[3]||(_[3]=f=>T(!1))],"sort-by":M.value,"onUpdate:sortBy":[_[1]||(_[1]=f=>M.value=f),_[4]||(_[4]=f=>T(!1))],page:S.value,"onUpdate:page":[_[2]||(_[2]=f=>S.value=f),_[5]||(_[5]=f=>T(!1))],items:C.value,headers:F,loading:P.value,"items-length":q.value,hover:"",class:"mx-auto mb-15 px-2 px-md-8 text-body-1 rounded-sm"},{"item.image":t(({item:f})=>[e(E,{to:"/material/find/"+f._id,style:{"text-decoration":"none"}},{default:t(()=>[e(Te,{src:f.image,class:"my-5 img"},null,8,["src"])]),_:2},1032,["to"])]),"item.donations":t(({item:f})=>[($(!0),R(X,null,ue(f.donations,(I,y)=>($(),ie(ce,{class:"mb-2",outlined:"",variant:"text",key:y},{default:t(()=>[e(_e,null,{default:t(()=>[e(N,{"no-gutters":"",class:"flex-column"},{default:t(()=>[e(i,{cols:"3",class:"form-label text-left my-1"},{default:t(()=>[x("數量: "+V(I.quantity),1)]),_:2},1024),e(i,{cols:"5",class:"form-label text-left my-1"},{default:t(()=>[x("服務單位: "+V(I.donator),1)]),_:2},1024),e(i,{cols:"4",class:"form-label text-left my-1"},{default:t(()=>[x("聯絡電話: "+V(I.phone),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length"])])}}},Bl=De(Al,[["__scopeId","data-v-832273f7"]]),Fl={class:"b-1 mx-auto landmark-container"},Rl=o("h2",{class:"bg-accent text-center mx-auto bb-1 py-1"},"地標管理",-1),El={class:"table-name text-left"},Ll={class:"table-tel"},jl={class:"table-address text-left"},Hl={class:"table-categories text-center"},Kl={class:"table-description py-2 text-left"},Ol={class:"table-action py-2 text-center"},Nl={class:"px-6 my-2"},Gl=o("label",{class:"form-label"},"服務地址",-1),Wl=o("label",{class:"form-label"},"服務名稱",-1),Xl=o("label",{class:"form-label"},"服務電話",-1),Ql=o("label",{class:"form-label"},"服務項目",-1),Yl=o("p",null,"服務對象",-1),Zl=o("p",null,"長期照顧",-1),Jl=o("p",null,"身心障礙",-1),ea=o("p",null,"兒童及少年",-1),ta=o("p",null,"社會救助",-1),la=o("p",null,"婦女",-1),aa=o("p",null,"其他",-1),sa=o("label",{class:"form-label"},"服務介紹",-1),oa={__name:"landmarkTable",setup(k){const{api:me,apiAuth:H}=Pe(),w=Ue(),Q=["長期照顧","身心障礙","婦女","兒童及少年","保護性服務"],M=["日照中心","護理之家","居家服務","交通接送","家庭托顧"],S=["身心障礙者服務中心","輔具中心","職業重建中心","小作所","庇護工場"],C=["少年福利服務中心","親子館","課後班"],F=["經濟補助","待用餐","基金會","社會福利中心"],P=["婦女福利服務中心","新住民家庭服務中心"],q=n(10),T=n([{key:"createdAt",order:"desc"}]),A=n(1),_=n([]),E=[{title:"服務名稱",align:"center",sortable:!1,key:"name"},{title:"地址",align:"center",sortable:!0,key:"address"},{title:"聯絡電話",align:"center",sortable:!1,key:"tel"},{title:"服務項目",align:"center",sortable:!0,key:"categories"},{title:"服務介紹",align:"center",sortable:!1,key:"description"},{title:"操作",align:"center",sortable:!1,key:"action"}],f=[{title:"服務名稱",align:"center",sortable:!1,key:"name"},{title:"地址",align:"center",sortable:!0,key:"address"},{title:"操作",align:"center",sortable:!1,key:"action"}],I=[{title:"服務名稱",align:"center",sortable:!1,key:"name"},{title:"地址",align:"center",sortable:!0,key:"address"},{title:"服務項目",align:"center",sortable:!0,key:"categories"},{title:"操作",align:"center",sortable:!1,key:"action"}],y=n(!0),r=n(0),O=n(""),c=async D=>{var v,re,se,fe;D&&(A.value=1),y.value=!0;try{const{data:ye}=await H.get("/user/landmark",{params:{page:A.value,itemsPerPage:q.value,sortBy:((v=T.value[0])==null?void 0:v.key)||"createdAt",sortOrder:((re=T.value[0])==null?void 0:re.order)||"desc",search:O.value}});console.log(ye),_.value.splice(0,_.value.length,...ye.result.data),r.value=ye.result.total,console.log(_.value)}catch(ye){console.log(ye),w({text:((fe=(se=ye==null?void 0:ye.response)==null?void 0:se.data)==null?void 0:fe.message)||"發生錯誤",snackbarProps:{color:"red"}})}y.value=!1};c();const z=n({open:!1}),K=D=>{z.value.open=!0,z.value.id=D._id,ee.value.value=D.name,te.value.value=D.tel,ge.value.value=D.description},G=()=>{z.value.open=!1,J()},Z=Oe({name:L().required("服務單位必填"),address:L().required("服務地址必填"),tel:L(),category5:$e().of(L()).required("分類必填"),category2:$e().of(L()).required("分類必填"),category3:$e().of(L()).required("分類必填"),category4:$e().of(L()).required("分類必填"),category5:$e().of(L()).required("分類必填"),category6:$e().of(L()).required("分類必填"),category7:$e().of(L()).required("分類必填"),description:L()}),{handleSubmit:U,isSubmitting:oe,resetForm:J}=Ne({validationSchema:Z,initialValues:{name:"",address:"",tel:"",category1:[],category2:[],category3:[],category4:[],category5:[],category6:[],category7:[],description:""}}),ee=B("name"),te=B("tel"),le=B("category1"),ae=B("category2"),pe=B("category3"),ne=B("category4"),W=B("category5"),de=B("category6"),ke=B("category7"),ge=B("description"),{value:ve,errorMessage:m}=B("address"),l="AIzaSyAyML8H2ENbc_kzs_ZSI6qYf7CCbBt0dAA";console.log(l);const d=n(null),h=n(null),g=async()=>{if(!ve.value){alert("找不到地址~");return}const D=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(ve.value)}&key=${l}`;try{const re=(await vt.get(D)).data;if(console.log(re),re.results&&re.results.length>0){const se=re.results[0].geometry.location.lat,fe=re.results[0].geometry.location.lng;d.value=se,h.value=fe}else alert("找不到地址~")}catch(v){console.error("新增地標錯誤:",v),alert("新增地標失敗~")}},b=U(async D=>{var v,re;try{await g(),console.log(d.value);const se=[...D.category1,...D.category2,...D.category3,...D.category4,...D.category5,...D.category6,...D.category7],fe={name:D.name,address:D.address,tel:D.tel,categories:se,description:D.description,lat:d.value,lng:h.value};console.log(fe),await H.patch("landmark/"+z.value.id,fe),w({text:"修改成功",snackbarProps:{color:"green"}}),G(),J(),c(!0)}catch(se){console.log(se),w({text:((re=(v=se==null?void 0:se.response)==null?void 0:v.data)==null?void 0:re.message)||"發生錯誤",snackbarProps:{color:"red"}})}});je(O,()=>{c(!0)});const a=n(!1),p=n(null);je(O,()=>{c(!0)});const Je=D=>{p.value=D,a.value=!0},it=()=>{a.value=!1,p.value=null},ut=async()=>{p.value&&(await ct(p.value),a.value=!1,p.value=null)},ct=async D=>{var v,re;try{await H.delete(`/landmark/${D._id}`),w({text:"刪除成功",snackbarProps:{color:"green"}}),c(!0)}catch(se){console.log(se),w({text:((re=(v=se==null?void 0:se.response)==null?void 0:v.data)==null?void 0:re.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return(D,v)=>{const re=He,se=He,fe=Qe,ye=kt;return $(),R(X,null,[o("div",Fl,[Rl,e(Re,{"items-per-page":q.value,"onUpdate:itemsPerPage":[v[3]||(v[3]=u=>q.value=u),v[6]||(v[6]=u=>c(!1))],"sort-by":T.value,"onUpdate:sortBy":[v[4]||(v[4]=u=>T.value=u),v[7]||(v[7]=u=>c(!1))],page:A.value,"onUpdate:page":[v[5]||(v[5]=u=>A.value=u),v[8]||(v[8]=u=>c(!1))],items:_.value,headers:D.$vuetify.display.xs||D.$vuetify.display.sm?f:D.$vuetify.display.md?I:E,loading:y.value,"items-length":r.value,search:O.value,hover:"",class:"mx-auto mb-15 px-2 px-md-8 text-body-1 rounded-sm"},{top:t(()=>[e(re,{class:"my-5",modelValue:O.value,"onUpdate:modelValue":v[0]||(v[0]=u=>O.value=u),onClickAppend:v[1]||(v[1]=u=>c(!0)),onKeydown:v[2]||(v[2]=Fe(u=>c(!0),["enter"])),"max-width":"100%"},null,8,["modelValue"])]),"item.name":t(({item:u})=>[o("td",El,V(u.name),1)]),"item.tel":t(({item:u})=>[o("td",Ll,V(u.tel),1)]),"item.address":t(({item:u})=>[o("td",jl,V(u.address),1)]),"item.categories":t(({item:u})=>[o("td",Hl,V(u.categories.join(" , ")),1)]),"item.description":t(({item:u})=>[o("td",Kl,V(u.description),1)]),"item.action":t(({item:u})=>[o("td",Ol,[x(V(u.action)+" ",1),e(j,{icon:"mdi-pencil",variant:"text",color:"grey-darken-2",onClick:mt=>K(u)},null,8,["onClick"]),e(j,{icon:"mdi-delete",variant:"text",color:"red-darken-4",onClick:mt=>Je(u)},null,8,["onClick"])])]),_:2},1032,["items-per-page","sort-by","page","items","headers","loading","items-length","search"]),e(we,{modelValue:a.value,"onUpdate:modelValue":v[9]||(v[9]=u=>a.value=u),"max-width":"400"},{default:t(()=>[e(ce,null,{default:t(()=>[e(_e,{class:"headline"},{default:t(()=>[x("確認刪除")]),_:1}),e(he,null,{default:t(()=>[x("你確定要刪除這個項目嗎？")]),_:1}),e(Me,null,{default:t(()=>[e(Xe),e(j,{color:"grey",text:"",onClick:it},{default:t(()=>[x("取消")]),_:1}),e(j,{color:"red",text:"",onClick:ut},{default:t(()=>[x("刪除")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(we,{"max-width":"700",modelValue:z.value.open,"onUpdate:modelValue":v[21]||(v[21]=u=>z.value.open=u)},{default:t(()=>[e(ce,null,{default:t(()=>[e(rt,{color:"secondary",prominent:"",class:"bb-1",height:"55"},{default:t(()=>[e(dt,{class:"mt-3 text-center font-weight-bold"},{default:t(()=>[x(" 修改地標 ")]),_:1})]),_:1}),o("div",Nl,[e(Ge,{onSubmit:Ke(s(b),["prevent"]),disabled:s(oe)},{default:t(()=>[e(N,{class:"my-1"},{default:t(()=>[e(i,{cols:"4",md:"3",class:"my-auto text-center ps-1 ps-sm-6"},{default:t(()=>[Gl]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(se,{modelValue:s(ve),"onUpdate:modelValue":v[10]||(v[10]=u=>tt(ve)?ve.value=u:null),"error-messages":s(m),label:"輸入資源地址","max-width":"1000px"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-center ps-1 ps-sm-6"},{default:t(()=>[Wl]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(fe,{modelValue:s(ee).value.value,"onUpdate:modelValue":v[11]||(v[11]=u=>s(ee).value.value=u),"error-messages":s(ee).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"4",md:"3",class:"my-auto text-center ps-1 ps-sm-6"},{default:t(()=>[Xl]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(fe,{modelValue:s(te).value.value,"onUpdate:modelValue":v[12]||(v[12]=u=>s(te).value.value=u),"error-messages":s(te).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"4",md:"3",class:"mt-2 text-center ps-1 ps-sm-6"},{default:t(()=>[Ql]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(Vt,{variant:"accordion"},{default:t(()=>[e($t,{title:"選擇類別"},{default:t(()=>[e(ht,null,{default:t(()=>[e(Ee,null,{default:t(()=>[e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[Yl,o("div",null,[e(Ce,{modelValue:s(le).value.value,"onUpdate:modelValue":v[13]||(v[13]=u=>s(le).value.value=u),"error-messages":s(le).errorMessage.value,column:"",multiple:""},{default:t(()=>[($(),R(X,null,ue(Q,u=>e(qe,{text:u,value:u,filter:"",density:"compact"},null,8,["text","value"])),64))]),_:1},8,["modelValue","error-messages"])]),e(Ve)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[Zl,o("div",null,[e(Ce,{modelValue:s(ae).value.value,"onUpdate:modelValue":v[14]||(v[14]=u=>s(ae).value.value=u),"error-messages":s(ae).errorMessage.value,column:"",multiple:""},{default:t(()=>[($(),R(X,null,ue(M,u=>e(qe,{text:u,value:u,filter:"",density:"compact"},null,8,["text","value"])),64))]),_:1},8,["modelValue","error-messages"])]),e(Ve)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[Jl,o("div",null,[e(Ce,{modelValue:s(pe).value.value,"onUpdate:modelValue":v[15]||(v[15]=u=>s(pe).value.value=u),"error-messages":s(pe).errorMessage.value,column:"",multiple:""},{default:t(()=>[($(),R(X,null,ue(S,u=>e(qe,{text:u,value:u,filter:"",density:"compact"},null,8,["text","value"])),64))]),_:1},8,["modelValue","error-messages"])]),e(Ve)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[ea,o("div",null,[e(Ce,{modelValue:s(ne).value.value,"onUpdate:modelValue":v[16]||(v[16]=u=>s(ne).value.value=u),"error-messages":s(ne).errorMessage.value,column:"",multiple:""},{default:t(()=>[($(),R(X,null,ue(C,u=>e(qe,{text:u,value:u,filter:"",density:"compact"},null,8,["text","value"])),64))]),_:1},8,["modelValue","error-messages"])]),e(Ve)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[ta,o("div",null,[e(Ce,{modelValue:s(W).value.value,"onUpdate:modelValue":v[17]||(v[17]=u=>s(W).value.value=u),"error-messages":s(W).errorMessage.value,column:"",multiple:""},{default:t(()=>[($(),R(X,null,ue(F,u=>e(qe,{text:u,value:u,filter:"",density:"compact"},null,8,["text","value"])),64))]),_:1},8,["modelValue","error-messages"])]),e(Ve)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[la,o("div",null,[e(Ce,{modelValue:s(ke).value.value,"onUpdate:modelValue":v[18]||(v[18]=u=>s(ke).value.value=u),"error-messages":s(ke).errorMessage.value,column:"",multiple:""},{default:t(()=>[($(),R(X,null,ue(P,u=>e(qe,{text:u,value:u,filter:"",density:"compact"},null,8,["text","value"])),64))]),_:1},8,["modelValue","error-messages"])]),e(Ve)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,null,{default:t(()=>[aa,e(Ce,{modelValue:s(de).value.value,"onUpdate:modelValue":v[19]||(v[19]=u=>s(de).value.value=u),"error-messages":s(de).errorMessage.value,column:"",multiple:""},{default:t(()=>[e(qe,{value:"其他",text:"其他",filter:"",density:"compact"})]),_:1},8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"4",md:"3",class:"text-center ps-1 ps-sm-6"},{default:t(()=>[sa]),_:1}),e(i,{cols:"8",md:"9"},{default:t(()=>[e(nt,{style:{"white-space":"pre-line"},variant:"outlined",modelValue:s(ge).value.value,"onUpdate:modelValue":v[20]||(v[20]=u=>s(ge).value.value=u),"error-messages":s(ge).errorMessage.value,"hide-details":"",rows:D.$vuetify.display.xs?"3":"4",clearable:!D.$vuetify.display.xs},null,8,["modelValue","error-messages","rows","clearable"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(i,{class:"text-center"},{default:t(()=>[e(ye,{text:"修改",type:"submit",class:"b-1 bg-accent mb-8",onClick:g})]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"])])]),_:1})]),_:1},8,["modelValue"])],64)}}},na=k=>(Ie("data-v-89b03c50"),k=k(),ze(),k),ra={key:0,style:{"z-index":"5"},class:"position-fixed bg-primary d-flex justify-center align-center"},da={class:"position-fixed bg-primary tabs-show",style:{width:"94%",height:"40px","z-index":"5","border-radius":"10px",left:"50%",bottom:"0.8%",transform:"translateX(-50%)"}},ia={key:1,class:"position-fixed bg-primary",style:{width:"40px",height:"290px",left:"0%",bottom:"2%","z-index":"5"}},ua={style:{width:"40px",height:"40px",left:"0%",bottom:"3%","z-index":"5"},class:"position-fixed bg-primary d-flex justify-center align-center"},ca={style:{width:"40px",height:"40px",bottom:"3%",right:"0"},class:"position-absolute me-5 d-flex justify-center align-center"},ma={class:"d-flex flex-row h-100"},pa={class:"group-container mx-auto"},va={class:"mx-auto mb-5 rounded-lg"},ga={class:"mx-auto mb-5 rounded-lg"},fa={class:"mx-auto mb-5 rounded-lg"},ya={class:"text-end h-100 w-100 mt-5"},ba={class:"text-end h-100 w-100 mt-5 d-none d-sm-block"},xa=na(()=>o("h1",null,"暫無任何活動收藏",-1)),_a={class:"group-container mx-auto"},ka={class:"mx-auto mb-5 rounded-lg"},Va={class:"mx-auto mb-5 rounded-lg"},$a={__name:"setting",setup(k){const{mobile:me}=gt(),{apiAuth:H}=Pe(),w=Ue(),Q=n([{title:"會員中心",disabled:!1,to:"/setting"},{title:"地標管理",disabled:!0}]),M=n([{title:"會員中心",disabled:!1,to:"/setting"},{title:"貼文管理",disabled:!0}]),S=n([{title:"會員中心",disabled:!1,to:"/setting"},{title:"活動收藏",disabled:!0}]),C=n([{title:"會員中心",disabled:!1,to:"/setting"},{title:"物資管理",disabled:!0}]),F=n("option-1"),P=n(!1),q=()=>{P.value=!P.value},T=n("true"),A=n([]),_=async()=>{try{const{data:y}=await H.get("/user/mark");A.value=y.map(r=>({...r,isFavorite:!0}))}catch(y){console.error("Failed to fetch favorite event details:",y)}},E=async y=>{try{await H.patch("/user/mark",{eventId:y}),A.value=A.value.filter(r=>r._id!==y),w({text:"取消收藏",snackbarProps:{color:"info"}})}catch(r){console.error("取消收藏失败",r),w({text:"取消收藏失败",snackbarProps:{color:"red"}})}};ft(()=>{_()});const f=n("find"),I=n("findReplay");return n(!1),n(!1),(y,r)=>{const O=xe("router-link");return $(),R(X,null,[y.$vuetify.display.xs?($(),R("div",ra,[o("div",da,[e(Le,{modelValue:F.value,"onUpdate:modelValue":r[0]||(r[0]=c=>F.value=c),color:"teal-darken-4",direction:"horizontal","show-arrows":"",style:{height:"40px","border-radius":"10px"},"fixed-tabs":""},{default:t(()=>[e(Y,{"prepend-icon":"mdi-account",value:"option-1"}),e(Y,{"prepend-icon":"mdi-map-marker",value:"option-2"}),e(Y,{"prepend-icon":"mdi-note-edit",value:"option-3"}),e(Y,{"prepend-icon":"mdi-book-cog",value:"option-4"}),e(Y,{"prepend-icon":"mdi-message-alert",value:"option-5"})]),_:1},8,["modelValue"])])])):($(),R("div",ia,[e(Le,{modelValue:F.value,"onUpdate:modelValue":r[1]||(r[1]=c=>F.value=c),color:"teal-darken-4",direction:"vertical","show-arrows":"",style:{width:"40px"},"fixed-tabs":""},{default:t(()=>[e(Y,{"prepend-icon":"mdi-account",value:"option-1"}),e(Y,{"prepend-icon":"mdi-map-marker",value:"option-2"}),e(Y,{"prepend-icon":"mdi-note-edit",value:"option-3"}),e(Y,{"prepend-icon":"mdi-book-cog",value:"option-4"}),e(Y,{"prepend-icon":"mdi-message-alert",value:"option-5"})]),_:1},8,["modelValue"]),o("div",ua,[yt(e(Be,{onClick:q},{default:t(()=>[x(V(P.value?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1},512),[[bt,!P.value]])])])),o("div",null,[e(wt,{class:"b-1 text-center bg-primary",width:"200",modelValue:P.value,"onUpdate:modelValue":r[8]||(r[8]=c=>P.value=c)},{default:t(()=>[o("div",null,[e(Le,{modelValue:F.value,"onUpdate:modelValue":r[7]||(r[7]=c=>F.value=c),color:"teal-darken-4",direction:"vertical","show-arrows":""},{default:t(()=>[e(Y,{"prepend-icon":"mdi-account",text:"基本資料",value:"option-1",height:"100",class:"text-body-1 ms-1",onClick:r[2]||(r[2]=c=>q(!1))}),e(Y,{"prepend-icon":"mdi-map-marker",text:"地標管理",value:"option-2",height:"100",class:"text-body-1 ms-1",onClick:r[3]||(r[3]=c=>q(!1))}),e(Y,{"prepend-icon":"mdi-note-edit",text:"貼文管理",value:"option-3",height:"100",class:"text-body-1 ms-1",onClick:r[4]||(r[4]=c=>q(!1))}),e(Y,{"prepend-icon":"mdi-book-cog",text:"活動收藏",value:"option-4",height:"100",class:"text-body-1 ms-1",onClick:r[5]||(r[5]=c=>q(!1))}),e(Y,{"prepend-icon":"mdi-message-alert",text:"物資管理",value:"option-5",height:"100",class:"text-body-1 ms-1",onClick:r[6]||(r[6]=c=>q(!1))})]),_:1},8,["modelValue"])]),o("div",ca,[e(Be,{onClick:q},{default:t(()=>[x(V(P.value?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})])]),_:1},8,["modelValue"])]),e(ce,{class:"h-100"},{default:t(()=>[o("div",ma,[e(Ee,null,{default:t(()=>[e(et,{modelValue:F.value,"onUpdate:modelValue":r[13]||(r[13]=c=>F.value=c),class:"mt-10"},{default:t(()=>[e(be,{value:"option-1"},{default:t(()=>[e(Pl)]),_:1}),e(be,{value:"option-2"},{default:t(()=>[s(me)?Se("",!0):($(),ie(We,{key:0,items:Q.value},{divider:t(()=>[e(Be,{icon:"mdi-chevron-right"})]),_:1},8,["items"])),e(oa)]),_:1}),e(be,{value:"option-3"},{default:t(()=>[s(me)?Se("",!0):($(),ie(We,{key:0,items:M.value},{divider:t(()=>[e(Be,{icon:"mdi-chevron-right"})]),_:1},8,["items"])),o("div",pa,[e(Le,{modelValue:f.value,"onUpdate:modelValue":r[9]||(r[9]=c=>f.value=c),color:"yellow-darken-3",class:"mt-3s"},{default:t(()=>[e(Y,{value:"find"},{default:t(()=>[x("物資募資")]),_:1}),e(Y,{value:"share"},{default:t(()=>[x("物資分享")]),_:1}),e(Y,{value:"event"},{default:t(()=>[x("活動管理")]),_:1})]),_:1},8,["modelValue"])]),e(et,{modelValue:f.value,"onUpdate:modelValue":r[10]||(r[10]=c=>f.value=c),class:"mt-2"},{default:t(()=>[e(be,{value:"find"},{default:t(()=>[o("div",va,[e(bl)])]),_:1}),e(be,{value:"share"},{default:t(()=>[o("div",ga,[e(al)])]),_:1}),e(be,{value:"event"},{default:t(()=>[o("div",fa,[e(Ht)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(be,{value:"option-4"},{default:t(()=>[s(me)?Se("",!0):($(),ie(We,{key:0,items:S.value},{divider:t(()=>[e(Be,{icon:"mdi-chevron-right"})]),_:1},8,["items"])),($(!0),R(X,null,ue(A.value,c=>($(),R("div",{class:"mx-auto rounded-lg my-5 mark-container",style:{border:"1.2px solid #000"},key:c._id},[e(ce,{variant:"flat",class:"rounded-lg pa-3 pa-sm-4",style:{"background-color":"#f7f2e9"}},{default:t(()=>[e(N,{class:"align-center"},{default:t(()=>[e(i,{cols:"5",sm:"3",class:"align-self-center align-sm-self-start"},{default:t(()=>[e(O,{to:"/event/"+c._id,style:{"text-decoration":"none"}},{default:t(()=>[e(Te,{src:c.image,class:"mx-auto b-1 rounded-lg mark-image",cover:""},null,8,["src"])]),_:2},1032,["to"])]),_:2},1024),e(i,{cols:"7",sm:"9",class:"align-self-start pl-0"},{default:t(()=>[e(_e,{class:"pl-0 pl-sm-2 font-weight-bold"},{default:t(()=>[x(V(c.title),1)]),_:2},1024),e(st,{class:"pl-0 pl-sm-2 font-weight-bold"},{default:t(()=>[x(V(c.organizer),1)]),_:2},1024),e(st,{class:"pl-0 pl-sm-2 font-weight-bold mt-2"},{default:t(()=>[x(V(c.date),1)]),_:2},1024),o("div",ya,[T.value?($(),ie(j,{key:0,color:"medium-emphasis",icon:T.value?"mdi-heart":"mdi-heart-outline",class:xt([T.value?"me-5 mb-2 bg-red-lighten-4":"me-5 mb-2 bg-info","bg-transparent m-0 d-sm-none"]),size:"small",onClick:z=>E(c._id),elevation:"0",variant:"text"},null,8,["icon","class","onClick"])):Se("",!0)]),o("div",ba,[T.value?($(),ie(j,{key:0,id:"btn",text:"取消收藏","prepend-icon":"mdi-bookmark",variant:"outlined",style:{"background-color":"#F5B4B4"},onClick:z=>E(c._id),class:"font-weight-black mark-btn pa-1"},null,8,["onClick"])):Se("",!0)])]),_:2},1024)]),_:2},1024),e(N)]),_:2},1024)]))),128)),A.value.length==0?($(),ie(N,{key:1},{default:t(()=>[e(i,{class:"text-center mt-15",style:{color:"#bfbfbf"}},{default:t(()=>[xa]),_:1})]),_:1})):Se("",!0)]),_:1}),e(be,{value:"option-5"},{default:t(()=>[s(me)?Se("",!0):($(),ie(We,{key:0,items:C.value},{divider:t(()=>[e(Be,{icon:"mdi-chevron-right"})]),_:1},8,["items"])),o("div",_a,[e(Le,{modelValue:I.value,"onUpdate:modelValue":r[11]||(r[11]=c=>I.value=c),color:"yellow-darken-3",class:"mt-3s"},{default:t(()=>[e(Y,{value:"findReply"},{default:t(()=>[x("物資募資")]),_:1}),e(Y,{value:"shareReply"},{default:t(()=>[x("物資分享")]),_:1})]),_:1},8,["modelValue"])]),e(et,{modelValue:I.value,"onUpdate:modelValue":r[12]||(r[12]=c=>I.value=c),class:"mt-2"},{default:t(()=>[e(be,{value:"findReply"},{default:t(()=>[o("div",ka,[e(Bl)])]),_:1}),e(be,{value:"shareReply"},{default:t(()=>[o("div",Va,[e(Tl)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})],64)}}},Oa=De($a,[["__scopeId","data-v-89b03c50"]]);export{Oa as default};
