import{_ as A}from"./resourceDialog-BMjhz9bv.js";import{_ as D}from"./appButton-BDEmHFZI.js";import{i as N,n as o,O as C,P as z,o as d,c as v,b as e,w as s,y as F,F as b,t as k,ar as R,j,a as p,e as B,V as q,l as Q,B as $,T as G,x,as as O,h as H,p as J}from"./index-CBalmzPI.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as W}from"./VBreadcrumbs-DOUMiQ5f.js";import{a as I,V}from"./VRow-C3pH8_4g.js";import{V as X}from"./VPagination-CHgauQMo.js";import{V as L,a as Y}from"./VContainer-D3aEslrv.js";import{b as Z}from"./VMenu-BbjlTTUM.js";import{V as P}from"./VCheckbox-BclhVrKH.js";import{V as ee}from"./VNavigationDrawer-p-38Zs1a.js";import"./inputText-CMFXtWBw.js";import"./index.esm-BCERKO5v.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-B0DEa_dR.js";import"./ssrBoot-DQvMx5fX.js";const ae={style:{width:"240px",height:"240px"},class:"d-flex justify-content-center b-1"},M=8,te={__name:"shareMaterial",setup(le){const{api:S}=J(),T=N(),U=o([{title:"首頁",disabled:!1,href:"/"},{title:"我想分享",disabled:!0}]),r=o([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),i=o(!0),c=o([]),m=o(""),u=()=>{let n=r.value.filter(a=>a.selected).map(a=>a.name);const l=m.value.toLowerCase();i.value?c.value=f.value.filter(a=>a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l)):n.length===0&&l.trim()===""?c.value=[]:c.value=f.value.filter(a=>{const h=n.length===0||n.includes(a.category),t=a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l);return h&&t})};C(m,()=>{u()}),C(()=>r.value.map(n=>n.selected),()=>{u(),i.value=r.value.every(n=>n.selected)},{deep:!0});const y=()=>{r.value.forEach(n=>{n.selected=i.value}),u()};z(()=>{y()});const _=o(1),w=o(1),f=o([]),g=async()=>{var n,l;try{const{data:a}=await S.get("/material/share",{params:{itemsPerPage:M,page:_.value}});w.value=Math.ceil(a.result.total/M),f.value.splice(0,f.value.length,...a.result.data),u()}catch(a){console.log(a),T({text:((l=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return g(),(n,l)=>{const a=D,h=A;return d(),v(b,null,[e(L,null,{default:s(()=>[e(W,{items:U.value},{divider:s(()=>[e(F,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(I,{class:"mx-5"},{default:s(()=>[(d(!0),v(b,null,k(c.value,t=>(d(),B(V,{key:t._id,cols:"12",sm:"6"},{default:s(()=>[e(q,{width:"650px",height:"300px",variant:"flat"},{default:s(()=>[e(I,{class:"align-content-center"},{default:s(()=>[e(V,{cols:"5",class:"ml-15"},{default:s(()=>[Q("div",ae,[e($,{src:t.image,contain:""},null,8,["src"])])]),_:2},1024),e(V,{cols:"5"},{default:s(()=>[e(G,null,{default:s(()=>[p(x(t.name),1)]),_:2},1024),e(O,null,{default:s(()=>[p(x(t.organizer),1)]),_:2},1024),e(H,null,{default:s(()=>[p("數量："+x(t.quantity),1)]),_:2},1024),e(a,{text:"詳細說明",class:"bg-third",to:"/material/share/"+t._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(V,{cols:"12"},{default:s(()=>[e(X,{modelValue:_.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>_.value=t),g],length:w.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(ee,{class:"bg-primary b-1 text-center",width:"300"},{default:s(()=>[e(h,{"card-title":"分享物資","number-title":"數量","description-title":"物資概況",onUpdate:g}),e(R,null,{default:s(()=>[e(j,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value=t)},null,8,["modelValue"])]),_:1}),e(Z,{class:"text-h5 font-weight-black text-left ml-2"},{default:s(()=>[p("物資類別")]),_:1}),e(Y,{thickness:"2",length:"250",class:"mx-auto"}),e(L,null,{default:s(()=>[e(P,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value=t),label:"所有物品",onChange:l[3]||(l[3]=t=>y()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(d(!0),v(b,null,k(r.value,t=>(d(),B(P,{key:t.name,modelValue:t.selected,"onUpdate:modelValue":E=>t.selected=E,label:t.name,onChange:u,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},be=K(te,[["__scopeId","data-v-753ba5e6"]]);export{be as default};
