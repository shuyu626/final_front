import{_ as D}from"./resourceDialog-CvECbzLx.js";import{_ as z}from"./appButton-BoPVuXnv.js";import{a as k,V as p,_ as F}from"./breadcrumbs-nk9dH87E.js";import{i as R,n as o,N as L,O as j,o as c,c as v,b as e,w as s,F as b,t as S,ap as q,j as Q,a as _,e as I,V as $,l as G,S as O,T as H,A as x,ar as J,h as K,p as W}from"./index-41xD9v_i.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as M,V as P}from"./VContainer-C_OjFy-9.js";import{V as Y}from"./VPagination-C-PEfXOz.js";import{a as Z}from"./VMenu-D_WVy6zd.js";import{V as T}from"./VCheckbox-BsAJONxt.js";import{V as ee}from"./VNavigationDrawer-KEZMmdVg.js";import"./inputText-ov4PBEwY.js";import"./index.esm-DoRl_wG_.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-D57j7n8_.js";import"./VChip-BGHXTOuR.js";import"./VSlideGroup-xTCECddZ.js";import"./ssrBoot-DRW_6ROa.js";const ae={style:{width:"240px",height:"240px"},class:"d-flex justify-content-center b-1"},A=8,te={__name:"shareMaterial",setup(le){const{api:B}=W(),E=R(),N=o(["物資分享","我想分享"]),r=o([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),i=o(!0),d=o([]),m=o(""),u=()=>{let n=r.value.filter(a=>a.selected).map(a=>a.name);const l=m.value.toLowerCase();i.value?d.value=f.value.filter(a=>a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l)):n.length===0&&l.trim()===""?d.value=[]:d.value=f.value.filter(a=>{const V=n.length===0||n.includes(a.category),h=a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l);return V&&h})};L(m,()=>{u()}),L(()=>r.value.map(n=>n.selected),()=>{u(),i.value=r.value.every(n=>n.selected)},{deep:!0});const w=()=>{r.value.forEach(n=>{n.selected=i.value}),u()};j(()=>{w()});const g=o(1),y=o(1),f=o([]),C=async()=>{var n,l;try{const{data:a}=await B.get("/material/share",{params:{itemsPerPage:A,page:g.value}});y.value=Math.ceil(a.result.total/A),f.value.splice(0,f.value.length,...a.result.data),u()}catch(a){console.log(a),E({text:((l=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return C(),(n,l)=>{const a=F,V=z,h=D;return c(),v(b,null,[e(P,null,{default:s(()=>[e(a,{title:N.value},null,8,["title"]),e(M,{width:"200",color:"primary",thickness:"5"}),e(k,{class:"mx-5"},{default:s(()=>[(c(!0),v(b,null,S(d.value,t=>(c(),I(p,{key:t._id,cols:"12",sm:"6"},{default:s(()=>[e($,{width:"650px",height:"300px",variant:"flat"},{default:s(()=>[e(k,{class:"align-content-center"},{default:s(()=>[e(p,{cols:"5",class:"ml-15"},{default:s(()=>[G("div",ae,[e(O,{src:t.image,contain:""},null,8,["src"])])]),_:2},1024),e(p,{cols:"5"},{default:s(()=>[e(H,null,{default:s(()=>[_(x(t.name),1)]),_:2},1024),e(J,null,{default:s(()=>[_(x(t.organizer),1)]),_:2},1024),e(K,null,{default:s(()=>[_("數量："+x(t.quantity),1)]),_:2},1024),e(V,{text:"詳細說明",class:"bg-third",to:"/material/share/"+t._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(p,{cols:"12"},{default:s(()=>[e(Y,{modelValue:g.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>g.value=t),C],length:y.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(ee,{class:"bg-primary b-1 text-center",width:"300"},{default:s(()=>[e(h,{"card-title":"分享物資","number-title":"數量","description-title":"物資概況"}),e(q,null,{default:s(()=>[e(Q,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value=t)},null,8,["modelValue"])]),_:1}),e(Z,{class:"text-h5 font-weight-black text-left ml-2"},{default:s(()=>[_("物資類別")]),_:1}),e(M,{thickness:"2",length:"250",class:"mx-auto"}),e(P,null,{default:s(()=>[e(T,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value=t),label:"所有物品",onChange:l[3]||(l[3]=t=>w()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(c(!0),v(b,null,S(r.value,t=>(c(),I(T,{key:t.name,modelValue:t.selected,"onUpdate:modelValue":U=>t.selected=U,label:t.name,onChange:u,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},xe=X(te,[["__scopeId","data-v-380df619"]]);export{xe as default};
