import{_ as E}from"./resourceDialog-BDY3vW2h.js";import{_ as A}from"./appButton-r9NSDq2t.js";import{i as D,n as o,O as C,P as N,o as c,c as v,b as e,w as s,C as F,F as b,t as k,ar as R,j,a as p,e as B,V as q,l as Q,y as $,T as G,B as x,as as O,h as H,p as J}from"./index-Db1RanFM.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as W}from"./VBreadcrumbs-DfgL4WQm.js";import{a as I,V}from"./VRow-BkjsVxfT.js";import{V as X}from"./VPagination-sZG7QaYo.js";import{V as L,a as Y}from"./VContainer-x3tBBA8o.js";import{a as Z}from"./VMenu-B0269wpg.js";import{V as P}from"./VCheckbox-BjyWpNsC.js";import{V as ee}from"./VNavigationDrawer-UelwTQ2l.js";import"./inputText-CrJrM96A.js";import"./index.esm-BZo-TVKa.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-DQDN7R8t.js";import"./ssrBoot-D78cn5l7.js";const ae={style:{width:"240px",height:"240px"},class:"d-flex justify-content-center b-1"},M=8,te={__name:"findMaterial",setup(le){const{api:S}=J(),T=D(),U=o([{title:"首頁",disabled:!1,href:"/"},{title:"物資分享",disabled:!0}]),r=o([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),i=o(!0),m=o([]),f=o(""),d=()=>{let n=r.value.filter(a=>a.selected).map(a=>a.name);const l=f.value.toLowerCase();i.value?m.value=u.value.filter(a=>a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l)):n.length===0&&l.trim()===""?m.value=[]:m.value=u.value.filter(a=>{const h=n.length===0||n.includes(a.category),t=a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l);return h&&t})};C(f,()=>{d()}),C(()=>r.value.map(n=>n.selected),()=>{d(),i.value=r.value.every(n=>n.selected)},{deep:!0});const y=()=>{r.value.forEach(n=>{n.selected=i.value}),d()};N(()=>{y()});const g=o(1),w=o(1),u=o([]),_=async()=>{var n,l;try{const{data:a}=await S.get("/material/find",{params:{itemsPerPage:M,page:g.value}});w.value=Math.ceil(a.result.total/M),u.value.splice(0,u.value.length,...a.result.data),d(),console.log(u.value)}catch(a){console.log(a),T({text:((l=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return _(),(n,l)=>{const a=A,h=E;return c(),v(b,null,[e(L,null,{default:s(()=>[e(W,{items:U.value},{divider:s(()=>[e(F,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(I,{class:"mx-5"},{default:s(()=>[(c(!0),v(b,null,k(m.value,t=>(c(),B(V,{key:t.id,cols:"12",sm:"6"},{default:s(()=>[e(q,{width:"650px",height:"300px",variant:"flat"},{default:s(()=>[e(I,{class:"align-content-center"},{default:s(()=>[e(V,{cols:"5",class:"ml-15"},{default:s(()=>[Q("div",ae,[e($,{src:t.image,contain:""},null,8,["src"])])]),_:2},1024),e(V,{cols:"5"},{default:s(()=>[e(G,{class:"text-h5 font-weight-bold"},{default:s(()=>[p(x(t.name),1)]),_:2},1024),e(O,{style:{"font-size":"17px"}},{default:s(()=>[p(x(t.organizer),1)]),_:2},1024),e(H,{style:{"font-size":"16px"}},{default:s(()=>[p("數量："+x(t.quantity),1)]),_:2},1024),e(a,{text:"詳細說明",class:"bg-third",to:"/material/find/"+t._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(V,{cols:"12"},{default:s(()=>[e(X,{modelValue:g.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>g.value=t),_],length:w.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(ee,{class:"bg-primary b-1 text-center",width:"300"},{default:s(()=>[e(h,{type:"find",onUpdate:_}),e(R,null,{default:s(()=>[e(j,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=t=>f.value=t)},null,8,["modelValue"])]),_:1}),e(Z,{class:"text-h5 font-weight-black text-left ml-2"},{default:s(()=>[p("物資類別")]),_:1}),e(Y,{thickness:"2",length:"250",class:"mx-auto"}),e(L,null,{default:s(()=>[e(P,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value=t),label:"所有物品",onChange:l[3]||(l[3]=t=>y()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(c(!0),v(b,null,k(r.value,t=>(c(),B(P,{key:t.name,modelValue:t.selected,"onUpdate:modelValue":z=>t.selected=z,label:t.name,onChange:d,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},be=K(te,[["__scopeId","data-v-9bf85801"]]);export{be as default};
