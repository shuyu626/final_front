import{_ as C}from"./appButton-Dv0gos5k.js";import{V as _,a as h,_ as F}from"./breadcrumbs-Ds8NVqxL.js";import{i as B,n as w,o as i,e as p,w as a,b as e,S as I,V as S,T as j,a as l,A as r,h as t,c as A,t as T,F as D,l as g,a3 as N,C as P,D as z,p as E}from"./index-DinF4U3z.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as R,V as L}from"./VContainer-UVUPIkTn.js";const $=n=>(P("data-v-d5a3b433"),n=n(),z(),n),q=$(()=>g("h2",{class:"info"},"活動介紹",-1)),G={class:"b-1 info pa-4"},H={style:{"white-space":"pre-line"},class:"text-body-1 w-75"},J={__name:"[id]",props:{event:Object,isFavorite:Boolean},setup(n){const{api:y,apiAuth:k}=E(),x=N(),f=B(),V=["活動分享","活動詳情"],s=w({_id:"",title:"",date:"",address:"",category:"",organizer:"",description:"",image:""}),m=w(n.isFavorite);(async()=>{var o,v;try{const{data:c}=await y.get("/event/"+x.params.id);Object.assign(s.value,c.result);const{data:d}=await k.get("/user/mark");m.value=d.some(u=>u._id===s.value._id)}catch(c){console.log(c),f({text:((v=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:v.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const b=async()=>{try{const o=await k.post("/user/toggleFavorite",{eventId:s.value._id});console.log(o),m.value=o.data.isFavorite,f({text:o.data.isFavorite?"已收藏":"取消收藏",snackbarProps:{color:"accent"}})}catch(o){console.error("收藏操作失敗",o),f({text:"收藏操作失敗",snackbarProps:{color:"red"}})}};return(o,v)=>{const c=F,d=C;return i(),p(L,null,{default:a(()=>[e(c,{title:V}),e(h,{"justify-center":""},{default:a(()=>[e(_,{cols:"5",class:"d-flex justify-center"},{default:a(()=>[e(I,{src:s.value.image,class:"","max-width":"400","max-height":"500",contain:""},null,8,["src"])]),_:1}),e(_,{cols:"6"},{default:a(()=>[e(S,{variant:"flat"},{default:a(()=>[e(j,{class:"font-weight-black",style:{"white-space":"pre-line"}},{default:a(()=>[l("活動名稱："+r(s.value.title),1)]),_:1}),e(R,{thickness:"0"}),e(t,{class:"font-weight-black"},{default:a(()=>[l("活動時間")]),_:1}),e(t,null,{default:a(()=>[l(r(s.value.date),1)]),_:1}),e(t,{class:"font-weight-black"},{default:a(()=>[l("活動地點")]),_:1}),e(t,null,{default:a(()=>[l(r(s.value.address),1)]),_:1}),e(t,{class:"font-weight-black"},{default:a(()=>[l("活動類別")]),_:1}),(i(!0),A(D,null,T(s.value.category,u=>(i(),p(t,{key:u},{default:a(()=>[l(r(u),1)]),_:2},1024))),128)),e(t,{class:"font-weight-black"},{default:a(()=>[l("主辦單位")]),_:1}),e(t,null,{default:a(()=>[l(r(s.value.organizer),1)]),_:1}),e(t),e(t),e(t),m.value?(i(),p(d,{key:0,"prepend-icon":"mdi-bookmark",text:"已收藏",class:"me-15",style:{backgroundColor:"#F5B4B4"},onClick:b})):(i(),p(d,{key:1,"prepend-icon":"mdi-bookmark",text:"我要收藏",class:"me-15 bg-info",onClick:b}))]),_:1})]),_:1})]),_:1}),e(h,null,{default:a(()=>[e(_,{cols:"12",class:"mt-10"},{default:a(()=>[q]),_:1}),e(_,{cols:"12"},{default:a(()=>[g("div",G,[g("p",H,r(s.value.description),1)])]),_:1})]),_:1})]),_:1})}}},Z=O(J,[["__scopeId","data-v-d5a3b433"]]);export{Z as default};
