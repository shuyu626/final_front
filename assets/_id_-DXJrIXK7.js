import{_ as I}from"./appButton-r9NSDq2t.js";import{d as S,i as P,n as v,P as j,o as f,e as g,w as a,b as e,C as z,y as E,V as L,T as N,a as c,B as d,h as s,c as T,t as A,F as D,g as O,a3 as R,a4 as M,v as U,l as h,a5 as $,D as q,E as G,p as H}from"./index-Db1RanFM.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as K}from"./VBreadcrumbs-DfgL4WQm.js";import{V as _,a as y}from"./VRow-BkjsVxfT.js";import{a as Q,V as W}from"./VContainer-x3tBBA8o.js";const X=u=>(q("data-v-ddbe1e42"),u=u(),G(),u),Y=X(()=>h("h2",{class:"info"},"活動介紹",-1)),Z={class:"b-1 info pa-4"},ee={style:{"white-space":"pre-line"},class:"text-body-1 w-75"},ae={__name:"[id]",props:{event:Object,isFavorite:Boolean},setup(u){const m=S(),{api:V,apiAuth:b}=H(),w=$(),p=P(),x=v([{title:"首頁",disabled:!1,href:"/"},{title:"活動分享",disabled:!1,href:"../event/findEvent.vue"},{title:"物資詳情",disabled:!0}]),o=v({_id:"",title:"",date:"",address:"",category:"",organizer:"",description:"",image:""}),n=v(u.isFavorite),k=async()=>{var r,i;try{const{data:t}=await V.get("/event/"+w.params.id);Object.assign(o.value,t.result),m.isLogin&&(n.value=await C(o.value._id))}catch(t){console.log(t),p({text:((i=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:i.message)||"發生錯誤",snackbarProps:{color:"red"}})}};k();const C=async r=>{var i,t;try{const{data:l}=await b.get("/user/mark");return l.some(B=>B._id===r)}catch(l){return console.log(l),p({text:((t=(i=l==null?void 0:l.response)==null?void 0:i.data)==null?void 0:t.message)||"發生錯誤",snackbarProps:{color:"red"}}),!1}},F=async()=>{if(!m.isLogin){p({text:"請登入後再收藏活動",snackbarProps:{color:"red"}});return}try{const r=await b.post("/user/toggleFavorite",{eventId:o.value._id});n.value=r.data.isFavorite,console.log(n.value),p({text:r.data.isFavorite?"已收藏":"取消收藏",snackbarProps:{color:"accent"}})}catch(r){console.error("收藏操作失败",r),p({text:"收藏操作失败",snackbarProps:{color:"red"}})}};return j(k),(r,i)=>{const t=I;return f(),g(W,null,{default:a(()=>[e(K,{items:x.value},{divider:a(()=>[e(z,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(y,{"justify-center":""},{default:a(()=>[e(_,{cols:"5",class:"d-flex justify-center"},{default:a(()=>[e(E,{src:o.value.image,class:"","max-width":"400","max-height":"500",contain:""},null,8,["src"])]),_:1}),e(_,{cols:"6"},{default:a(()=>[e(L,{variant:"flat"},{default:a(()=>[e(N,{class:"font-weight-black",style:{"white-space":"pre-line"}},{default:a(()=>[c("活動名稱："+d(o.value.title),1)]),_:1}),e(Q,{thickness:"0"}),e(s,{class:"font-weight-black"},{default:a(()=>[c("活動時間")]),_:1}),e(s,null,{default:a(()=>[c(d(o.value.date),1)]),_:1}),e(s,{class:"font-weight-black"},{default:a(()=>[c("活動地點")]),_:1}),e(s,null,{default:a(()=>[c(d(o.value.address),1)]),_:1}),e(s,{class:"font-weight-black"},{default:a(()=>[c("活動類別")]),_:1}),(f(!0),T(D,null,A(o.value.category,l=>(f(),g(s,{key:l},{default:a(()=>[c(d(l),1)]),_:2},1024))),128)),e(s,{class:"font-weight-black"},{default:a(()=>[c("主辦單位")]),_:1}),e(s,null,{default:a(()=>[c(d(o.value.organizer),1)]),_:1}),e(s),e(s),e(s),O(m).isLogin?(f(),g(t,{key:0,"prepend-icon":n.value?"mdi-bookmark":"mdi-bookmark-outline",text:n.value?"已收藏":"我要收藏",class:R(n.value?"me-15":"me-15 bg-info"),style:M(n.value?{backgroundColor:"#F5B4B4"}:{}),onClick:F},null,8,["prepend-icon","text","class","style"])):U("",!0)]),_:1})]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(_,{cols:"12",class:"mt-10"},{default:a(()=>[Y]),_:1}),e(_,{cols:"12"},{default:a(()=>[h("div",Z,[h("p",ee,d(o.value.description),1)])]),_:1})]),_:1})]),_:1})}}},ie=J(ae,[["__scopeId","data-v-ddbe1e42"]]);export{ie as default};
