import{_ as A}from"./resourceDialog-xrvevUUu.js";import{_ as D}from"./appButton-BfgyKS4o.js";import{i as N,n,O as k,P as F,r as R,o as u,c as b,b as e,w as s,F as x,C as j,t as B,a6 as q,j as Q,a as p,p as $,e as I,V as G,l as O,y as H,T as J,B as y,a7 as K,h as W}from"./index-B48YCZ9Z.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as L,a as Y}from"./VContainer-LbBbi1zP.js";import{V as Z}from"./VNavigationDrawer-BqCzEa8U.js";import{V as ee}from"./VBreadcrumbs-DxXggDc-.js";import{V as P,a as _}from"./VRow-lGLSltiD.js";import{V as te}from"./VPagination-_ilSsuxq.js";import{a as ae}from"./VMenu-BWraitUd.js";import{V as M}from"./VCheckbox-FxmD3k2c.js";import"./inputText-BJbqElAX.js";import"./index.esm-CO7hphL7.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VTooltip-DZnzTsxP.js";import"./VSelect-E0cpSPTS.js";import"./ssrBoot-D8MGhuDs.js";const le={style:{width:"240px",height:"240px"},class:"d-flex justify-content-center b-1"},S=8,se={__name:"shareMaterial",setup(oe){const{api:T}=$(),U=N(),z=n([{title:"首頁",disabled:!1,href:"/"},{title:"我想分享",disabled:!0}]),r=n([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),i=n(!0),d=n([]),m=n(""),c=()=>{let o=r.value.filter(t=>t.selected).map(t=>t.name);const l=m.value.toLowerCase();i.value?d.value=f.value.filter(t=>t.name.toLowerCase().includes(l)||t.organizer.toLowerCase().includes(l)):o.length===0&&l.trim()===""?d.value=[]:d.value=f.value.filter(t=>{const g=o.length===0||o.includes(t.category),v=t.name.toLowerCase().includes(l)||t.organizer.toLowerCase().includes(l);return g&&v})};k(m,()=>{c()}),k(()=>r.value.map(o=>o.selected),()=>{c(),i.value=r.value.every(o=>o.selected)},{deep:!0});const C=()=>{r.value.forEach(o=>{o.selected=i.value}),c()};F(()=>{C()});const V=n(1),w=n(1),f=n([]),h=async()=>{var o,l;try{const{data:t}=await T.get("/material/share",{params:{itemsPerPage:S,page:V.value}});w.value=Math.ceil(t.result.total/S),f.value.splice(0,f.value.length,...t.result.data),c()}catch(t){console.log(t),U({text:((l=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return h(),(o,l)=>{const t=R("router-link"),g=D,v=A;return u(),b(x,null,[e(L,null,{default:s(()=>[e(ee,{items:z.value},{divider:s(()=>[e(j,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(P,{class:"mx-5"},{default:s(()=>[(u(!0),b(x,null,B(d.value,a=>(u(),I(_,{key:a._id,cols:"12",sm:"6"},{default:s(()=>[e(G,{width:"650px",height:"300px",variant:"flat"},{default:s(()=>[e(P,{class:"align-content-center"},{default:s(()=>[e(_,{cols:"5",class:"ml-15"},{default:s(()=>[e(t,{to:"/material/share/"+a._id},{default:s(()=>[O("div",le,[e(H,{src:a.image,contain:""},null,8,["src"])])]),_:2},1032,["to"])]),_:2},1024),e(_,{cols:"5"},{default:s(()=>[e(J,{class:"text-h6 font-weight-bold"},{default:s(()=>[p(y(a.name),1)]),_:2},1024),e(K,{style:{"font-size":"16px"}},{default:s(()=>[p(y(a.organizer),1)]),_:2},1024),e(W,{style:{"font-size":"15px"}},{default:s(()=>[p("數量："+y(a.quantity),1)]),_:2},1024),e(g,{text:"詳細說明",class:"bg-third",to:"/material/share/"+a._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(_,{cols:"12"},{default:s(()=>[e(te,{modelValue:V.value,"onUpdate:modelValue":[l[0]||(l[0]=a=>V.value=a),h],length:w.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(Z,{class:"bg-primary b-1 text-center",width:"300"},{default:s(()=>[e(v,{"card-title":"分享物資","number-title":"數量","description-title":"物資概況",onUpdate:h}),e(q,null,{default:s(()=>[e(Q,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=a=>m.value=a)},null,8,["modelValue"])]),_:1}),e(ae,{class:"text-h5 font-weight-black text-left ml-2"},{default:s(()=>[p("物資類別")]),_:1}),e(Y,{thickness:"2",length:"250",class:"mx-auto"}),e(L,null,{default:s(()=>[e(M,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=a=>i.value=a),label:"所有物品",onChange:l[3]||(l[3]=a=>C()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(u(!0),b(x,null,B(r.value,a=>(u(),I(M,{key:a.name,modelValue:a.selected,"onUpdate:modelValue":E=>a.selected=E,label:a.name,onChange:c,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},Ce=X(se,[["__scopeId","data-v-612512ca"]]);export{Ce as default};
