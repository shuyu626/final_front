import{_ as A}from"./resourceDialog-fMRV9kYJ.js";import{_ as D}from"./appButton-CjmqcvMO.js";import{i as N,n as o,O as k,P as F,o as c,c as b,b as e,w as s,y as R,F as x,t as B,ar as j,j as q,a as p,r as Q,e as I,V as $,l as G,B as O,T as H,x as y,as as J,h as K,p as W}from"./index-DOKjEeaw.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Y}from"./VBreadcrumbs-D7xO5Q_I.js";import{a as L,V as _}from"./VRow-DEu2eCRv.js";import{V as Z}from"./VPagination-BTJbf4B5.js";import{V as P,a as ee}from"./VContainer-CAztc7wg.js";import{b as te}from"./VMenu-DznRLCu2.js";import{V as M}from"./VCheckbox-BoME2TY8.js";import{V as ae}from"./VNavigationDrawer-Dtv3q0E_.js";import"./inputText-21tOsGNw.js";import"./index.esm-DOR69wP7.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-Cln8gt1B.js";import"./ssrBoot-D7mdbICF.js";const le={style:{width:"240px",height:"240px"},class:"d-flex justify-content-center b-1"},S=8,se={__name:"findMaterial",setup(ne){const{api:T}=W(),U=N(),z=o([{title:"首頁",disabled:!1,href:"/"},{title:"物資分享",disabled:!0}]),r=o([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),i=o(!0),m=o([]),f=o(""),d=()=>{let n=r.value.filter(t=>t.selected).map(t=>t.name);const l=f.value.toLowerCase();i.value?m.value=u.value.filter(t=>t.name.toLowerCase().includes(l)||t.organizer.toLowerCase().includes(l)):n.length===0&&l.trim()===""?m.value=[]:m.value=u.value.filter(t=>{const h=n.length===0||n.includes(t.category),v=t.name.toLowerCase().includes(l)||t.organizer.toLowerCase().includes(l);return h&&v})};k(f,()=>{d()}),k(()=>r.value.map(n=>n.selected),()=>{d(),i.value=r.value.every(n=>n.selected)},{deep:!0});const w=()=>{r.value.forEach(n=>{n.selected=i.value}),d()};F(()=>{w()});const V=o(1),C=o(1),u=o([]),g=async()=>{var n,l;try{const{data:t}=await T.get("/material/find",{params:{itemsPerPage:S,page:V.value}});C.value=Math.ceil(t.result.total/S),u.value.splice(0,u.value.length,...t.result.data),d(),console.log(u.value)}catch(t){console.log(t),U({text:((l=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return g(),(n,l)=>{const t=Q("router-link"),h=D,v=A;return c(),b(x,null,[e(P,null,{default:s(()=>[e(Y,{items:z.value},{divider:s(()=>[e(R,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(L,{class:"mx-5"},{default:s(()=>[(c(!0),b(x,null,B(m.value,a=>(c(),I(_,{key:a.id,cols:"12",sm:"6"},{default:s(()=>[e($,{width:"650px",height:"300px",variant:"flat"},{default:s(()=>[e(L,{class:"align-content-center"},{default:s(()=>[e(_,{cols:"5",class:"ml-15"},{default:s(()=>[e(t,{to:"/material/find/"+a._id},{default:s(()=>[G("div",le,[e(O,{src:a.image,contain:""},null,8,["src"])])]),_:2},1032,["to"])]),_:2},1024),e(_,{cols:"5"},{default:s(()=>[e(H,{class:"text-h6 font-weight-bold"},{default:s(()=>[p(y(a.name),1)]),_:2},1024),e(J,{style:{"font-size":"16px"}},{default:s(()=>[p(y(a.organizer),1)]),_:2},1024),e(K,{style:{"font-size":"15px"}},{default:s(()=>[p("數量："+y(a.quantity),1)]),_:2},1024),e(h,{text:"詳細說明",class:"bg-third",to:"/material/find/"+a._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(_,{cols:"12"},{default:s(()=>[e(Z,{modelValue:V.value,"onUpdate:modelValue":[l[0]||(l[0]=a=>V.value=a),g],length:C.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(ae,{class:"bg-primary b-1 text-center",width:"300"},{default:s(()=>[e(v,{type:"find",onUpdate:g}),e(j,null,{default:s(()=>[e(q,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=a=>f.value=a)},null,8,["modelValue"])]),_:1}),e(te,{class:"text-h5 font-weight-black text-left ml-2"},{default:s(()=>[p("物資類別")]),_:1}),e(ee,{thickness:"2",length:"250",class:"mx-auto"}),e(P,null,{default:s(()=>[e(M,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=a=>i.value=a),label:"所有物品",onChange:l[3]||(l[3]=a=>w()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(c(!0),b(x,null,B(r.value,a=>(c(),I(M,{key:a.name,modelValue:a.selected,"onUpdate:modelValue":E=>a.selected=E,label:a.name,onChange:d,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},ye=X(se,[["__scopeId","data-v-3c5d92bf"]]);export{ye as default};
