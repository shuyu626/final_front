import{_ as C}from"./appButton-DwR49RZV.js";import{V as d,a as h,_ as F}from"./breadcrumbs-yq99DckG.js";import{i as B,n as b,o as f,e as m,w as e,b as a,S as I,V as S,T as j,a as l,A as n,h as t,l as v,a3 as A,C as T,D,p as N}from"./index-C3mp5WEP.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as z,V as O}from"./VContainer-DtZPQl3V.js";const R=r=>(T("data-v-2712d022"),r=r(),D(),r),E=R(()=>v("h2",{class:"info"},"活動介紹",-1)),$={class:"b-1 info pa-4"},q={style:{"white-space":"pre-line"},class:"text-body-1 w-75"},G={__name:"[id]",props:{event:Object,isFavorite:Boolean},setup(r){const{api:w,apiAuth:g}=N(),x=A(),u=B(),y=["活動分享","活動詳情"],s=b({_id:"",title:"",date:"",address:"",category:"",organizer:"",description:"",image:""}),_=b(r.isFavorite);(async()=>{var o,p;try{const{data:c}=await w.get("/event/"+x.params.id);Object.assign(s.value,c.result);const{data:i}=await g.get("/user/mark");_.value=i.some(V=>V._id===s.value._id)}catch(c){console.log(c),u({text:((p=(o=c==null?void 0:c.response)==null?void 0:o.data)==null?void 0:p.message)||"發生錯誤",snackbarProps:{color:"red"}})}})();const k=async()=>{try{const o=await g.post("/user/toggleFavorite",{eventId:s.value._id});console.log(o),_.value=o.data.isFavorite,u({text:o.data.isFavorite?"已收藏":"取消收藏",snackbarProps:{color:"accent"}})}catch(o){console.error("收藏操作失敗",o),u({text:"收藏操作失敗",snackbarProps:{color:"red"}})}};return(o,p)=>{const c=F,i=C;return f(),m(O,null,{default:e(()=>[a(c,{title:y}),a(h,{"justify-center":""},{default:e(()=>[a(d,{cols:"5",class:"d-flex justify-center"},{default:e(()=>[a(I,{src:s.value.image,class:"","max-width":"400","max-height":"500",contain:""},null,8,["src"])]),_:1}),a(d,{cols:"5"},{default:e(()=>[a(S,{variant:"flat"},{default:e(()=>[a(j,{class:"font-weight-black"},{default:e(()=>[l("活動名稱："+n(s.value.title),1)]),_:1}),a(z,{thickness:"0"}),a(t,{class:"font-weight-black"},{default:e(()=>[l("活動時間")]),_:1}),a(t,null,{default:e(()=>[l(n(s.value.date),1)]),_:1}),a(t,{class:"font-weight-black"},{default:e(()=>[l("活動地點")]),_:1}),a(t,null,{default:e(()=>[l(n(s.value.address),1)]),_:1}),a(t,{class:"font-weight-black"},{default:e(()=>[l("活動類別")]),_:1}),a(t,null,{default:e(()=>[l(n(s.value.category),1)]),_:1}),a(t,{class:"font-weight-black"},{default:e(()=>[l("主辦單位")]),_:1}),a(t,null,{default:e(()=>[l(n(s.value.organizer),1)]),_:1}),a(t),a(t),a(t),_.value?(f(),m(i,{key:0,"prepend-icon":"mdi-bookmark",text:"已收藏",class:"me-15",style:{backgroundColor:"#F5B4B4"},onClick:k})):(f(),m(i,{key:1,"prepend-icon":"mdi-bookmark",text:"我要收藏",class:"me-15 bg-info",onClick:k}))]),_:1})]),_:1})]),_:1}),a(h,null,{default:e(()=>[a(d,{cols:"12",class:"mt-10"},{default:e(()=>[E]),_:1}),a(d,{cols:"12"},{default:e(()=>[v("div",$,[v("p",q,n(s.value.description),1)])]),_:1})]),_:1})]),_:1})}}},W=P(G,[["__scopeId","data-v-2712d022"]]);export{W as default};
