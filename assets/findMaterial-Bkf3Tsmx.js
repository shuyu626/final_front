import{_ as A}from"./resourceDialog-D8x7AoPW.js";import{_ as D}from"./appButton-DNHrQYRz.js";import{i as N,n as o,O as k,P as F,r as R,o as c,c as x,b as e,w as s,F as b,C as j,t as B,ar as q,j as Q,a as p,p as $,e as I,V as G,l as O,y as H,T as J,B as y,as as K,h as W}from"./index-DWuYxiXl.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as L,a as Y}from"./VContainer-DCTSpMr5.js";import{V as Z}from"./VNavigationDrawer-Cz0mV6tX.js";import{V as ee}from"./VBreadcrumbs-DRysoJ-S.js";import{V as P,a as _}from"./VRow-BYiB3Cvk.js";import{V as ae}from"./VPagination-DJqXTR0q.js";import{a as te}from"./VMenu-C6qFZ0tv.js";import{V as M}from"./VCheckbox-B_Ex88LJ.js";import"./inputText-BapyBKVu.js";import"./index.esm-BhmPWaNw.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-DIBHgyAS.js";import"./ssrBoot-BxoD_hDw.js";const le={style:{width:"240px",height:"240px"},class:"d-flex justify-content-center b-1"},S=8,se={__name:"findMaterial",setup(ne){const{api:T}=$(),U=N(),z=o([{title:"首頁",disabled:!1,href:"/"},{title:"我要募資",disabled:!0}]),r=o([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),i=o(!0),m=o([]),f=o(""),d=()=>{let n=r.value.filter(a=>a.selected).map(a=>a.name);const l=f.value.toLowerCase();i.value?m.value=u.value.filter(a=>a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l)):n.length===0&&l.trim()===""?m.value=[]:m.value=u.value.filter(a=>{const h=n.length===0||n.includes(a.category),v=a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l);return h&&v})};k(f,()=>{d()}),k(()=>r.value.map(n=>n.selected),()=>{d(),i.value=r.value.every(n=>n.selected)},{deep:!0});const C=()=>{r.value.forEach(n=>{n.selected=i.value}),d()};F(()=>{C()});const V=o(1),w=o(1),u=o([]),g=async()=>{var n,l;try{const{data:a}=await T.get("/material/find",{params:{itemsPerPage:S,page:V.value}});w.value=Math.ceil(a.result.total/S),u.value.splice(0,u.value.length,...a.result.data),d(),console.log(u.value)}catch(a){console.log(a),U({text:((l=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return g(),(n,l)=>{const a=R("router-link"),h=D,v=A;return c(),x(b,null,[e(L,null,{default:s(()=>[e(ee,{items:z.value},{divider:s(()=>[e(j,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(P,{class:"mx-5"},{default:s(()=>[(c(!0),x(b,null,B(m.value,t=>(c(),I(_,{key:t.id,cols:"12",sm:"6"},{default:s(()=>[e(G,{width:"650px",height:"300px",variant:"flat"},{default:s(()=>[e(P,{class:"align-content-center"},{default:s(()=>[e(_,{cols:"5",class:"ml-15"},{default:s(()=>[e(a,{to:"/material/find/"+t._id},{default:s(()=>[O("div",le,[e(H,{src:t.image,contain:""},null,8,["src"])])]),_:2},1032,["to"])]),_:2},1024),e(_,{cols:"5"},{default:s(()=>[e(J,{class:"text-h6 font-weight-bold"},{default:s(()=>[p(y(t.name),1)]),_:2},1024),e(K,{style:{"font-size":"16px"}},{default:s(()=>[p(y(t.organizer),1)]),_:2},1024),e(W,{style:{"font-size":"15px"}},{default:s(()=>[p("數量："+y(t.quantity),1)]),_:2},1024),e(h,{text:"詳細說明",class:"bg-third",to:"/material/find/"+t._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(_,{cols:"12"},{default:s(()=>[e(ae,{modelValue:V.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>V.value=t),g],length:w.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(Z,{class:"bg-primary b-1 text-center",width:"300"},{default:s(()=>[e(v,{type:"find",onUpdate:g}),e(q,null,{default:s(()=>[e(Q,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=t=>f.value=t)},null,8,["modelValue"])]),_:1}),e(te,{class:"text-h5 font-weight-black text-left ml-2"},{default:s(()=>[p("物資類別")]),_:1}),e(Y,{thickness:"2",length:"250",class:"mx-auto"}),e(L,null,{default:s(()=>[e(M,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value=t),label:"所有物品",onChange:l[3]||(l[3]=t=>C()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(c(!0),x(b,null,B(r.value,t=>(c(),I(M,{key:t.name,modelValue:t.selected,"onUpdate:modelValue":E=>t.selected=E,label:t.name,onChange:d,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},ye=X(se,[["__scopeId","data-v-e6436092"]]);export{ye as default};
