import{_ as A}from"./resourceDialog-DrMxq8FV.js";import{_ as D}from"./appButton-Bk1vRE_B.js";import{i as N,n,O as k,P as F,r as R,o as d,c as b,b as e,w as s,F as x,C as j,t as B,ac as q,j as Q,a as p,p as $,e as I,V as G,l as O,y as H,T as J,B as y,ad as K,h as W}from"./index-CBnRXN3v.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as L,a as Y}from"./VContainer-C-AwBdJC.js";import{V as Z}from"./VNavigationDrawer-DG7Zp6xB.js";import{V as ee}from"./VBreadcrumbs-2gCPkSDU.js";import{V as P,a as _}from"./VRow-bDIBFcJw.js";import{V as ae}from"./VPagination-kdY7kwiS.js";import{a as te}from"./VMenu-14Iye73x.js";import{V as M}from"./VCheckbox-BCcN8H1K.js";import"./inputText-Bqz_RjiJ.js";import"./index.esm--TZUbTsY.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-CnYgL3Au.js";import"./ssrBoot-BRbhGmI-.js";const le={style:{width:"240px",height:"240px"},class:"d-flex justify-content-center b-1"},S=8,se={__name:"shareMaterial",setup(oe){const{api:T}=$(),U=N(),z=n([{title:"首頁",disabled:!1,href:"/"},{title:"我想分享",disabled:!0}]),r=n([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),i=n(!0),u=n([]),m=n(""),c=()=>{let o=r.value.filter(a=>a.selected).map(a=>a.name);const l=m.value.toLowerCase();i.value?u.value=f.value.filter(a=>a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l)):o.length===0&&l.trim()===""?u.value=[]:u.value=f.value.filter(a=>{const g=o.length===0||o.includes(a.category),v=a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l);return g&&v})};k(m,()=>{c()}),k(()=>r.value.map(o=>o.selected),()=>{c(),i.value=r.value.every(o=>o.selected)},{deep:!0});const C=()=>{r.value.forEach(o=>{o.selected=i.value}),c()};F(()=>{C()});const V=n(1),w=n(1),f=n([]),h=async()=>{var o,l;try{const{data:a}=await T.get("/material/share",{params:{itemsPerPage:S,page:V.value}});w.value=Math.ceil(a.result.total/S),f.value.splice(0,f.value.length,...a.result.data),c()}catch(a){console.log(a),U({text:((l=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return h(),(o,l)=>{const a=R("router-link"),g=D,v=A;return d(),b(x,null,[e(L,null,{default:s(()=>[e(ee,{items:z.value},{divider:s(()=>[e(j,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(P,{class:"mx-5"},{default:s(()=>[(d(!0),b(x,null,B(u.value,t=>(d(),I(_,{key:t._id,cols:"12",sm:"6"},{default:s(()=>[e(G,{width:"650px",height:"300px",variant:"flat"},{default:s(()=>[e(P,{class:"align-content-center"},{default:s(()=>[e(_,{cols:"5",class:"ml-15"},{default:s(()=>[e(a,{to:"/material/share/"+t._id},{default:s(()=>[O("div",le,[e(H,{src:t.image,contain:""},null,8,["src"])])]),_:2},1032,["to"])]),_:2},1024),e(_,{cols:"5"},{default:s(()=>[e(J,{class:"text-h6 font-weight-bold"},{default:s(()=>[p(y(t.name),1)]),_:2},1024),e(K,{style:{"font-size":"16px"}},{default:s(()=>[p(y(t.organizer),1)]),_:2},1024),e(W,{style:{"font-size":"15px"}},{default:s(()=>[p("數量："+y(t.quantity),1)]),_:2},1024),e(g,{text:"詳細說明",class:"bg-third",to:"/material/share/"+t._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(_,{cols:"12"},{default:s(()=>[e(ae,{modelValue:V.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>V.value=t),h],length:w.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(Z,{class:"bg-primary b-1 text-center",width:"300"},{default:s(()=>[e(v,{"card-title":"分享物資","number-title":"數量","description-title":"物資概況",onUpdate:h}),e(q,null,{default:s(()=>[e(Q,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value=t)},null,8,["modelValue"])]),_:1}),e(te,{class:"text-h5 font-weight-black text-left ml-2"},{default:s(()=>[p("物資類別")]),_:1}),e(Y,{thickness:"2",length:"250",class:"mx-auto"}),e(L,null,{default:s(()=>[e(M,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value=t),label:"所有物品",onChange:l[3]||(l[3]=t=>C()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(d(!0),b(x,null,B(r.value,t=>(d(),I(M,{key:t.name,modelValue:t.selected,"onUpdate:modelValue":E=>t.selected=E,label:t.name,onChange:c,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},ye=X(se,[["__scopeId","data-v-612512ca"]]);export{ye as default};
