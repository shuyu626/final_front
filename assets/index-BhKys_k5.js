import{_ as J}from"./search-cjWcDjqO.js";import{i as H,n as i,P as Q,o as P,c as T,b as e,w as l,S as X,l as c,z as Y,C as V,E as R,G as j,p as Z,r as G,a as B,m as z,V as be,T as ke,h as he,f as we,g as y,k as Ve,y as $e,F as D,q as Pe,u as Ie,d as Se,s as pe,A as Ae,e as N,v as ce,x as ae,B as Le,D as Ue}from"./index-BM-Z1O92.js";import{c as Ce,a as O,u as Te,b as E,V as Be}from"./index.esm-D6wyXeFr.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ee}from"./eventTable.vue_vue_type_style_index_0_scoped_b74ae7aa_lang-whmEm7de.js";import{_ as Me,V as ze}from"./logo-cIWdH2NL.js";import{_ as Fe}from"./inputText-nYR14uyd.js";import{V as me}from"./VContainer-D-C1iiCU.js";import{V as ge,a as L}from"./VRow-Bnu10bz3.js";import{V as qe}from"./VSelect-CwMpn1b_.js";import{V as De}from"./VTextarea-xYR5fM6x.js";import{b as ve}from"./route-block-B_A1xBdJ.js";import{V as Ke}from"./VAppBar-BwcvSTPw.js";import{V as Ne}from"./VNavigationDrawer-BbX5iRU_.js";import{a as Oe,b as le,c as Ee,V as se}from"./VTabs-C_44-6xt.js";import{b as He,V as Re,a as je,c as We}from"./_commonjsHelpers-BEJhyQ8M.js";import"./VPagination-Dn48Fdl6.js";import"./VSlideGroup-ydR4NULJ.js";import"./VToolbar-BfUTp44N.js";import"./ssrBoot-DNpl3ar1.js";const Ge=b=>(R("data-v-e78deed9"),b=b(),j(),b),Je={class:"b-1 w-75 mx-auto"},Qe=Ge(()=>c("h2",{class:"bb-1 bg-primary text-center mx-auto py-1"},"帳號管理",-1)),Xe={class:"text-center"},Ye={style:{width:"220px"}},Ze={style:{width:"350px"},class:"py-2"},et={__name:"allAccountTable",setup(b){const{api:F,apiAuth:I}=Z(),x=H(),_=i(10),p=i([{key:"createdAt",order:"desc"}]),f=i(1),h=i([]),g=[{title:"圖片",align:"center",sortable:!1,key:"avatar"},{title:"使用者",align:"center",sortable:!1,key:"_id"},{title:"服務單位",align:"center",sortable:!1,key:"username"},{title:"信箱",align:"center",sortable:!1,key:"email"}],k=i(!0),w=i(0),v=i(""),m=async S=>{var o,a,t,u;S&&(f.value=1),k.value=!0;try{const{data:s}=await I.get("/user/",{params:{page:f.value,itemsPerPage:_.value,sortBy:((o=p.value[0])==null?void 0:o.key)||"createdAt",sortOrder:((a=p.value[0])==null?void 0:a.order)||"desc",search:v.value}});h.value.splice(0,h.value.length,...s.result.data),console.log(h.value),w.value=s.result.total}catch(s){console.log(s),x({text:((u=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:u.message)||"發生錯誤",snackbarProps:{color:"red"}})}k.value=!1};return m(),Q(v,()=>{m(!0)}),(S,o)=>{const a=J;return P(),T("div",Je,[Qe,e(ee,{"items-per-page":_.value,"onUpdate:itemsPerPage":[o[3]||(o[3]=t=>_.value=t),o[6]||(o[6]=t=>m(!1))],"sort-by":p.value,"onUpdate:sortBy":[o[4]||(o[4]=t=>p.value=t),o[7]||(o[7]=t=>m(!1))],page:f.value,"onUpdate:page":[o[5]||(o[5]=t=>f.value=t),o[8]||(o[8]=t=>m(!1))],items:h.value,headers:g,loading:k.value,"items-length":w.value,search:v.value,hover:"",class:"mb-15 px-8 rounded-lg",style:{"font-size":"15px"}},{top:l(()=>[e(a,{class:"my-5",modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=t=>v.value=t),onClickAppend:o[1]||(o[1]=t=>m(!0)),onKeydown:o[2]||(o[2]=X(t=>m(!0),["enter"])),"max-width":"100%"},null,8,["modelValue"])]),"item.avatar":l(({item:t})=>[c("div",Xe,[e(Y,{src:t.avatar,width:"100px","max-height":"140px",class:"my-5 mx-auto"},null,8,["src"])])]),"item.address":l(({item:t})=>[c("td",Ye,V(t.address),1)]),"item.description":l(({item:t})=>[c("td",Ze,V(t.description),1)]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length","search"])])}}},tt=W(et,[["__scopeId","data-v-e78deed9"]]),K=b=>(R("data-v-3f6ea5e1"),b=b(),j(),b),at={class:"b-1 w-75 mx-auto"},lt=K(()=>c("h2",{class:"bb-1 bg-primary text-center mx-auto py-1"},"活動管理",-1)),st={style:{width:"180px"},class:"text-left"},ot={style:{width:"220px"},class:"text-left"},nt={style:{width:"80px"}},rt={style:{width:"350px"},class:"py-2"},it={style:{width:"80px"}},dt=K(()=>c("label",{class:"form-label"},"活動名稱：",-1)),ut=K(()=>c("label",{class:"form-label"},"活動地點：",-1)),ct=K(()=>c("label",{class:"form-label"},"活動類別：",-1)),mt=K(()=>c("label",{class:"form-label"},"活動時間：",-1)),pt=K(()=>c("label",{class:"form-label"},"主辦單位：",-1)),gt=K(()=>c("label",{class:"form-label"},"活動介紹：",-1)),vt={class:"mx-auto"},bt={__name:"allEventTable",setup(b){const{api:F,apiAuth:I}=Z(),x=H(),_=i(null),p=i([]),f=i([]),h=i(10),g=i([{key:"createdAt",order:"desc"}]),k=i(1),w=i([]),v=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"活動名稱",align:"center",sortable:!1,key:"title"},{title:"活動地點",align:"center",sortable:!1,key:"address"},{title:"活動類別",align:"center",sortable:!0,key:"category"},{title:"活動時間",align:"center",sortable:!0,key:"date"},{title:"主辦單位",align:"center",sortable:!1,key:"organizer"},{title:"活動介紹",align:"center",sortable:!1,key:"description"},{title:"操作",align:"center",sortable:!1,key:"action"}],m=i(!0),S=i(0),o=i(""),a=async A=>{var n,M,U,$;A&&(k.value=1),m.value=!0;try{const{data:C}=await I.get("/event/all",{params:{page:k.value,itemsPerPage:h.value,sortBy:((n=g.value[0])==null?void 0:n.key)||"createdAt",sortOrder:((M=g.value[0])==null?void 0:M.order)||"desc",search:o.value}});w.value.splice(0,w.value.length,...C.result.data),S.value=C.result.total}catch(C){console.log(C),x({text:(($=(U=C==null?void 0:C.response)==null?void 0:U.data)==null?void 0:$.message)||"發生錯誤",snackbarProps:{color:"red"}})}m.value=!1};a();const t=["兒童","青少年","育兒","長照","精神","照顧","就學","就業","身障","親職教育","早療","紓壓","居住","醫療","司法","社工","其他"],u=i({open:!1,id:""}),s=()=>{u.value.open=!1,ye(),_.value.deleteFileRecord()},d=Ce({title:O().required("活動標題必填"),date:O().required("活動日期必填"),address:O().required("活動地點必填"),category:O().required("活動分類必填").test("isCategory","商品分類錯誤",A=>t.includes(A)),organizer:O().required("主辦單位必填"),description:O().required("活動介紹必填")}),{handleSubmit:q,isSubmitting:te,resetForm:ye}=Te({validationSchema:d,initialValues:{title:"",date:"",address:"",category:"",organizer:"",description:""}}),oe=E("title"),ne=E("date"),re=E("address"),ie=E("category"),de=E("organizer"),ue=E("description"),xe=q(async A=>{var n,M,U;if(!((n=p.value[0])!=null&&n.error)&&!(p.value.length<1))try{const $=new FormData;$.append("title",A.title),$.append("date",A.date),$.append("address",A.address),$.append("category",A.category),$.append("organizer",A.organizer),$.append("description",A.description),p.value.length>0&&$.append("image",p.value[0].file),await I.patch("/event/"+u.value.id,$),x({text:"新增成功",snackbarProps:{color:"green"}}),s()}catch($){console.log($),x({text:((U=(M=$==null?void 0:$.response)==null?void 0:M.data)==null?void 0:U.message)||"發生錯誤",snackbarProps:{color:"red"}})}});Q(o,()=>{a(!0)});const _e=async A=>{var n,M;try{await I.delete(`/event/${A._id}`),x({text:"刪除成功",snackbarProps:{color:"green"}}),a(!0)}catch(U){console.log(U),x({text:((M=(n=U==null?void 0:U.response)==null?void 0:n.data)==null?void 0:M.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return(A,n)=>{const M=J,U=G("router-link"),$=G("vue-file-agent"),C=Fe;return P(),T(D,null,[c("div",at,[lt,e(ee,{"items-per-page":h.value,"onUpdate:itemsPerPage":[n[3]||(n[3]=r=>h.value=r),n[6]||(n[6]=r=>a(!1))],"sort-by":g.value,"onUpdate:sortBy":[n[4]||(n[4]=r=>g.value=r),n[7]||(n[7]=r=>a(!1))],page:k.value,"onUpdate:page":[n[5]||(n[5]=r=>k.value=r),n[8]||(n[8]=r=>a(!1))],items:w.value,headers:v,loading:m.value,"items-length":S.value,search:o.value,hover:"",class:"mb-15 px-8 rounded-lg"},{top:l(()=>[e(M,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=r=>o.value=r),onClickAppend:n[1]||(n[1]=r=>a(!0)),onKeydown:n[2]||(n[2]=X(r=>a(!0),["enter"])),"max-width":"100%",class:"my-5"},null,8,["modelValue"])]),"item.image":l(({item:r})=>[e(U,{to:"/event/"+r._id,style:{"text-decoration":"none"}},{default:l(()=>[e(Y,{src:r.image,width:"140px","max-height":"160px",class:"my-5"},null,8,["src"])]),_:2},1032,["to"])]),"item.title":l(({item:r})=>[c("td",st,V(r.title),1)]),"item.address":l(({item:r})=>[c("td",ot,V(r.address),1)]),"item.category":l(({item:r})=>[c("td",nt,V(r.category.join(" , ")),1)]),"item.description":l(({item:r})=>[c("td",rt,V(r.description),1)]),"item.action":l(({item:r})=>[c("td",it,[B(V(r.action)+" ",1),e(z,{icon:"mdi-delete",variant:"text",color:"red-darken-4",onClick:Jt=>_e(r)},null,8,["onClick"])])]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length","search"])]),e($e,{"max-width":"700",modelValue:u.value.open,"onUpdate:modelValue":n[18]||(n[18]=r=>u.value.open=r)},{default:l(()=>[e(be,null,{default:l(()=>[e(me,null,{default:l(()=>[e(ke,{class:"font-weight-black text-center text-h4"},{default:l(()=>[B("新增活動")]),_:1}),e(he,null,{default:l(()=>[e(Be,{onSubmit:we(y(xe),["prevent"]),disabled:y(te)},{default:l(()=>[e(ge,null,{default:l(()=>[e(L,null,{default:l(()=>[e($,{modelValue:p.value,"onUpdate:modelValue":n[9]||(n[9]=r=>p.value=r),"raw-model-value":f.value,"onUpdate:rawModelValue":n[10]||(n[10]=r=>f.value=r),accept:"image/jpeg,image/png",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"},ref_key:"fileAgent",ref:_},null,8,["modelValue","raw-model-value"])]),_:1})]),_:1}),e(ge,null,{default:l(()=>[e(L,{cols:"12",md:"3",class:"my-auto text-center"},{default:l(()=>[dt]),_:1}),e(L,{cols:"12",md:"9"},{default:l(()=>[e(C,{modelValue:y(oe).value.value,"onUpdate:modelValue":n[11]||(n[11]=r=>y(oe).value.value=r),"error-messages":y(oe).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(L,{cols:"12",md:"3",class:"my-auto text-center"},{default:l(()=>[ut]),_:1}),e(L,{cols:"12",md:"9"},{default:l(()=>[e(C,{modelValue:y(re).value.value,"onUpdate:modelValue":n[12]||(n[12]=r=>y(re).value.value=r),"error-messages":y(re).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(L,{cols:"12",md:"3",class:"my-auto text-center"},{default:l(()=>[ct]),_:1}),e(L,{cols:"12",md:"3"},{default:l(()=>[e(qe,{modelValue:y(ie).value.value,"onUpdate:modelValue":n[13]||(n[13]=r=>y(ie).value.value=r),"error-messages":y(ie).errorMessage.value,label:"選擇",variant:"outlined",density:"comfortable",dense:"",width:"140",items:t,"hide-details":""},null,8,["modelValue","error-messages"])]),_:1}),e(L,{cols:"3",class:"my-auto text-center px-0"},{default:l(()=>[mt]),_:1}),e(L,{cols:"3"},{default:l(()=>[e(C,{modelValue:y(ne).value.value,"onUpdate:modelValue":n[14]||(n[14]=r=>y(ne).value.value=r),"error-messages":y(ne).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(L,{cols:"12",md:"3",class:"my-auto text-center"},{default:l(()=>[pt]),_:1}),e(L,{cols:"12",md:"9"},{default:l(()=>[e(C,{modelValue:y(de).value.value,"onUpdate:modelValue":n[15]||(n[15]=r=>y(de).value.value=r),"error-messages":y(de).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(L,{cols:"12",md:"3",class:"text-center"},{default:l(()=>[gt]),_:1}),e(L,{cols:"12",md:"9"},{default:l(()=>[e(De,{label:"輸入文字",variant:"outlined",clearable:"","hide-details":"",modelValue:y(ue).value.value,"onUpdate:modelValue":n[16]||(n[16]=r=>y(ue).value.value=r),"error-messages":y(ue).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(Ve,null,{default:l(()=>[c("div",vt,[e(z,{variant:"text",class:"rounded-xl b-1",density:"comfortable",type:"submit",loading:y(te)},{default:l(()=>[B("送出")]),_:1},8,["loading"]),e(z,{text:"取消",variant:"text",class:"rounded-xl b-1",density:"comfortable",onClick:n[17]||(n[17]=r=>s())})])]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},ft=W(bt,[["__scopeId","data-v-3f6ea5e1"]]),yt=b=>(R("data-v-60a13580"),b=b(),j(),b),xt={class:"b-1 w-75 mx-auto"},_t=yt(()=>c("h2",{class:"bb-1 bg-primary text-center mx-auto py-1"},"我要募資",-1)),kt={style:{width:"250px"},class:"py-2"},ht={style:{width:"80px"}},wt={__name:"allFindTable",props:{cardTitle:{type:String,default:"發布需求"},numberTitle:{type:String,default:"需求量"},descriptionTitle:{type:String,default:"需求介紹"},type:{type:String,default:"share"}},setup(b){const{api:F,apiAuth:I}=Z(),x=H(),_=i(8),p=i([{key:"createdAt",order:"desc"}]),f=i(1),h=i([]),g=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"名稱",align:"center",sortable:!1,key:"name"},{title:"數量",align:"center",sortable:!1,key:"quantity"},{title:"分類",align:"center",sortable:!0,key:"category"},{title:"概況",align:"center",sortable:!1,key:"description"},{title:"單位",align:"center",sortable:!1,key:"organizer"},{title:"操作",align:"center",sortable:!1,key:"action"}],k=i(!0),w=i(0),v=i(""),m=async o=>{var a,t,u,s;o&&(f.value=1),k.value=!0;try{const{data:d}=await I.get("/material/find",{params:{page:f.value,itemsPerPage:_.value,sortBy:((a=p.value[0])==null?void 0:a.key)||"createdAt",sortOrder:((t=p.value[0])==null?void 0:t.order)||"desc",search:v.value}});h.value.splice(0,h.value.length,...d.result.data),w.value=d.result.total}catch(d){console.log(d),x({text:((s=(u=d==null?void 0:d.response)==null?void 0:u.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}k.value=!1};m(),Q(v,()=>{m(!0)});const S=async o=>{var a,t;try{await I.delete(`/Material/${o._id}`),x({text:"刪除成功",snackbarProps:{color:"green"}}),m(!0)}catch(u){console.log(u),x({text:((t=(a=u==null?void 0:u.response)==null?void 0:a.data)==null?void 0:t.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return(o,a)=>{const t=J,u=G("router-link");return P(),T("div",xt,[_t,e(ee,{"items-per-page":_.value,"onUpdate:itemsPerPage":[a[3]||(a[3]=s=>_.value=s),a[6]||(a[6]=s=>m(!1))],"sort-by":p.value,"onUpdate:sortBy":[a[4]||(a[4]=s=>p.value=s),a[7]||(a[7]=s=>m(!1))],page:f.value,"onUpdate:page":[a[5]||(a[5]=s=>f.value=s),a[8]||(a[8]=s=>m(!1))],items:h.value,headers:g,loading:k.value,"items-length":w.value,search:v.value,hover:"",class:"mb-15 px-8 rounded-lg"},{top:l(()=>[e(t,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=s=>v.value=s),onClickAppend:a[1]||(a[1]=s=>m(!0)),onKeydown:a[2]||(a[2]=X(s=>m(!0),["enter"])),"max-width":"100%",class:"my-5"},null,8,["modelValue"])]),"item.image":l(({item:s})=>[e(u,{to:"/material/find/"+s._id,style:{"text-decoration":"none"}},{default:l(()=>[e(Y,{src:s.image,width:"80px","max-height":"100px"},null,8,["src"])]),_:2},1032,["to"])]),"item.description":l(({item:s})=>[c("td",kt,V(s.description),1)]),"item.action":l(({item:s})=>[c("td",ht,[B(V(s.action)+" ",1),e(z,{icon:"mdi-delete",variant:"text",color:"red-darken-4",onClick:d=>S(s)},null,8,["onClick"])])]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length","search"])])}}},Vt=W(wt,[["__scopeId","data-v-60a13580"]]),$t=b=>(R("data-v-b6c6e925"),b=b(),j(),b),Pt={class:"b-1 w-75 mx-auto"},It=$t(()=>c("h2",{class:"bb-1 bg-primary text-center mx-auto py-1"},"我要分享",-1)),St={style:{width:"250px"},class:"py-2"},At={style:{width:"80px"}},Lt={__name:"allShareTable",props:{cardTitle:{type:String,default:"發布需求"},numberTitle:{type:String,default:"需求量"},descriptionTitle:{type:String,default:"需求介紹"},type:{type:String,default:"share"}},setup(b){const{api:F,apiAuth:I}=Z(),x=H();i(null),i([]),i([]);const _=i(8),p=i([{key:"createdAt",order:"desc"}]),f=i(1),h=i([]),g=[{title:"圖片",align:"center",sortable:!1,key:"image"},{title:"名稱",align:"center",sortable:!1,key:"name"},{title:"數量",align:"center",sortable:!1,key:"quantity"},{title:"分類",align:"center",sortable:!0,key:"category"},{title:"概況",align:"center",sortable:!1,key:"description"},{title:"單位",align:"center",sortable:!1,key:"organizer"},{title:"操作",align:"center",sortable:!1,key:"action"}],k=i(!0),w=i(0),v=i(""),m=async o=>{var a,t,u,s;o&&(f.value=1),k.value=!0;try{const{data:d}=await I.get("/material/share",{params:{page:f.value,itemsPerPage:_.value,sortBy:((a=p.value[0])==null?void 0:a.key)||"createdAt",sortOrder:((t=p.value[0])==null?void 0:t.order)||"desc",search:v.value}});h.value.splice(0,h.value.length,...d.result.data),w.value=d.result.total}catch(d){console.log(d),x({text:((s=(u=d==null?void 0:d.response)==null?void 0:u.data)==null?void 0:s.message)||"發生錯誤",snackbarProps:{color:"red"}})}k.value=!1};m(),Q(v,()=>{m(!0)});const S=async o=>{var a,t;try{await I.delete(`/Material/${o._id}`),x({text:"刪除成功",snackbarProps:{color:"green"}}),m(!0)}catch(u){console.log(u),x({text:((t=(a=u==null?void 0:u.response)==null?void 0:a.data)==null?void 0:t.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return(o,a)=>{const t=J,u=G("router-link");return P(),T("div",Pt,[It,e(ee,{"items-per-page":_.value,"onUpdate:itemsPerPage":[a[3]||(a[3]=s=>_.value=s),a[6]||(a[6]=s=>m(!1))],"sort-by":p.value,"onUpdate:sortBy":[a[4]||(a[4]=s=>p.value=s),a[7]||(a[7]=s=>m(!1))],page:f.value,"onUpdate:page":[a[5]||(a[5]=s=>f.value=s),a[8]||(a[8]=s=>m(!1))],items:h.value,headers:g,loading:k.value,"items-length":w.value,search:v.value,hover:"",class:"mb-15 px-8 rounded-lg"},{top:l(()=>[e(t,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=s=>v.value=s),onClickAppend:a[1]||(a[1]=s=>m(!0)),onKeydown:a[2]||(a[2]=X(s=>m(!0),["enter"])),"max-width":"100%",class:"my-5"},null,8,["modelValue"])]),"item.image":l(({item:s})=>[e(u,{to:"/material/share/"+s._id,style:{"text-decoration":"none"}},{default:l(()=>[e(Y,{src:s.image,width:"80px","max-height":"100px"},null,8,["src"])]),_:2},1032,["to"])]),"item.description":l(({item:s})=>[c("td",St,V(s.description),1)]),"item.action":l(({item:s})=>[c("td",At,[B(V(s.action)+" ",1),e(z,{icon:"mdi-delete",variant:"text",color:"red-darken-4",onClick:d=>S(s)},null,8,["onClick"])])]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length","search"])])}}},Ut=W(Lt,[["__scopeId","data-v-b6c6e925"]]),Ct=b=>(R("data-v-834b31c3"),b=b(),j(),b),Tt={class:"b-1 w-75 mx-auto"},Bt=Ct(()=>c("h2",{class:"bb-1 bg-primary text-center mx-auto py-1"},"地標管理",-1)),Mt={style:{width:"240px"}},zt={style:{width:"120px"}},Ft={style:{width:"300px"},class:"text-left"},qt={style:{width:"200px"},class:"text-center"},Dt={style:{width:"350px"},class:"py-2 text-left"},Kt={style:{width:"80px"}},Nt={__name:"allLandmark",setup(b){const{apiAuth:F}=Z(),I=H(),x=i(10),_=i([{key:"createdAt",order:"desc"}]),p=i(1),f=i([]),h=[{title:"服務名稱",align:"center",sortable:!1,key:"name"},{title:"地址",align:"center",sortable:!0,key:"address"},{title:"聯絡電話",align:"center",sortable:!1,key:"tel"},{title:"服務項目",align:"center",sortable:!0,key:"categories"},{title:"服務介紹",align:"center",sortable:!1,key:"description"},{title:"操作",align:"center",sortable:!1,key:"action"}],g=i(!0),k=i(0),w=i(""),v=async S=>{var o,a,t,u;S&&(p.value=1),g.value=!0;try{const{data:s}=await F.get("/landmark/",{params:{page:p.value,itemsPerPage:x.value,sortBy:((o=_.value[0])==null?void 0:o.key)||"createdAt",sortOrder:((a=_.value[0])==null?void 0:a.order)||"desc",search:w.value}});console.log(s),f.value.splice(0,f.value.length,...s.result.data),k.value=s.result.total}catch(s){console.log(s),I({text:((u=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:u.message)||"發生錯誤",snackbarProps:{color:"red"}})}g.value=!1};v(),Q(w,()=>{v(!0)});const m=async S=>{var o,a;try{await F.delete(`/landmark/${S._id}`),I({text:"刪除成功",snackbarProps:{color:"green"}}),v(!0)}catch(t){console.log(t),I({text:((a=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:a.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return(S,o)=>{const a=J;return P(),T("div",Tt,[Bt,e(ee,{"items-per-page":x.value,"onUpdate:itemsPerPage":[o[3]||(o[3]=t=>x.value=t),o[6]||(o[6]=t=>v(!1))],"sort-by":_.value,"onUpdate:sortBy":[o[4]||(o[4]=t=>_.value=t),o[7]||(o[7]=t=>v(!1))],page:p.value,"onUpdate:page":[o[5]||(o[5]=t=>p.value=t),o[8]||(o[8]=t=>v(!1))],items:f.value,headers:h,loading:g.value,"items-length":k.value,search:w.value,hover:"",class:"mx-auto rounded-lg mb-15 px-8"},{top:l(()=>[e(a,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=t=>w.value=t),onClickAppend:o[1]||(o[1]=t=>v(!0)),onKeydown:o[2]||(o[2]=X(t=>v(!0),["enter"])),"max-width":"100%",class:"my-5"},null,8,["modelValue"])]),"item.name":l(({item:t})=>[c("td",Mt,V(t.name),1)]),"item.tel":l(({item:t})=>[c("td",zt,V(t.tel),1)]),"item.address":l(({item:t})=>[c("td",Ft,V(t.address),1)]),"item.categories":l(({item:t})=>[c("td",qt,V(t.categories.join(" , ")),1)]),"item.description":l(({item:t})=>[c("td",Dt,V(t.description),1)]),"item.action":l(({item:t})=>[c("td",Kt,[B(V(t.action)+" ",1),e(z,{icon:"mdi-delete",variant:"text",color:"red-darken-4",onClick:u=>m(t)},null,8,["onClick"])])]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length","search"])])}}},Ot=W(Nt,[["__scopeId","data-v-834b31c3"]]),Et=b=>(R("data-v-88a04cc9"),b=b(),j(),b),Ht=Et(()=>c("span",{style:{"text-transform":"capitalize",color:"#474747"},class:"text-h6 pl-1"},"KeeperS",-1)),Rt={class:"d-flex flex-row"},jt={class:"mx-auto mb-5 rounded-lg"},Wt={class:"mx-auto mb-5 rounded-lg"},Gt={class:"mx-auto mb-5 rounded-lg"},fe={__name:"index",setup(b){const F=["會員中心","基本資料"],I=["會員中心","地標管理"],x=["會員中心","貼文管理"],_=["會員中心","活動收藏"],p=i("option-1"),{mobile:f}=Pe(),h=Ie(),g=Se(),k=H(),w=i(!1),v=pe(()=>[{title:"資源地圖",icon:"mdi-map-search",show:g.isLogin,items:[{to:"/",text:"資源查詢",show:g.isLogin},{to:"/map/createMark",text:"新增資源",show:g.isLogin}]},{title:"物資分享",icon:"mdi-package-variant",show:g.isLogin,items:[{to:"/material/find/findMaterial",text:"我要募資",show:g.isLogin||g.isAdmin},{to:"/material/share/shareMaterial",text:"我要分享",show:g.isLogin||g.isAdmin}]}]),m=pe(()=>[{to:"/",text:"資源地圖",icon:"mdi-map-search",show:!g.isLogin},{to:"/event/findEvent",text:"活動分享",icon:"mdi-calendar",show:!0},{to:"/setting",text:"管理",icon:"mdi-cog",show:g.isLogin},{to:"",text:"註冊/登入",icon:"mdi-account-plus",show:!g.isLogin},{to:"/admin/",text:"管理者",icon:"mdi-face-man",show:g.isLogin&&g.isAdmin}]),S=a=>{a.text==="註冊/登入"&&(dialogOpen.value=!0)},o=async()=>{await g.logout(),k({text:"登出成功",snackbarProps:{color:"green"}}),h.push("/")};return(a,t)=>{const u=G("breadcrumbs"),s=tt;return P(),T(D,null,[e(Ke,{color:"info","scroll-behavior":"elevate",class:"b-1"},{default:l(()=>[e(me,{class:"d-flex align-center"},{default:l(()=>[e(z,{to:"/",active:!1,class:"p-1"},{default:l(()=>[e(Y,{src:Me,width:"30",class:"d-inline-block",style:{"vertical-align":"cneter"},contain:""}),Ht]),_:1}),e(Ae),y(f)?(P(),N(ze,{key:0,onClick:t[0]||(t[0]=d=>w.value=!0)})):(P(),T(D,{key:1},[(P(!0),T(D,null,ce(v.value,d=>(P(),N(He,{key:d.title,"open-on-hover":"",transition:"slide-y-transition"},{activator:l(({props:q})=>[d.show?(P(),N(z,Le({key:0,ref_for:!0},q,{ripple:!1,"prepend-icon":d.icon,class:"font-weight-black pe-1"}),{default:l(()=>[B(V(d.title)+" ",1),e(Ue,null,{default:l(()=>[B("mdi-menu-down")]),_:1})]),_:2},1040,["prepend-icon"])):ae("",!0)]),default:l(()=>[e(Re,null,{default:l(()=>[(P(!0),T(D,null,ce(d.items,(q,te)=>(P(),T(D,{key:te},[q.show?(P(),N(je,{key:0,to:q.to,link:""},{default:l(()=>[e(We,null,{default:l(()=>[B(V(q.text),1)]),_:2},1024)]),_:2},1032,["to"])):ae("",!0)],64))),128))]),_:2},1024)]),_:2},1024))),128)),(P(!0),T(D,null,ce(m.value,d=>(P(),T(D,null,[d.show?(P(),N(z,{key:d.to,"prepend-icon":d.icon,to:d.to,active:!1,class:"mx-1 font-weight-black pe-1",onClick:q=>S(d)},{default:l(()=>[B(V(d.text),1)]),_:2},1032,["prepend-icon","to","onClick"])):ae("",!0)],64))),256)),y(g).isLogin?(P(),N(z,{key:0,class:"ms-8 bg-accent b-1",elevation:"2","prepend-icon":"mdi-account-arrow-right",onClick:o},{default:l(()=>[B("登出")]),_:1})):ae("",!0)],64))]),_:1})]),_:1}),e(Ne,{color:"info",class:"b-1"},{default:l(()=>[e(Oe,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=d=>p.value=d),color:"black",direction:"vertical","show-arrows":""},{default:l(()=>[e(le,{"prepend-icon":"mdi-account-wrench",text:"用戶管理",value:"option-1",height:"100",class:"text-body-1 ms-1"}),e(le,{"prepend-icon":"mdi-map-marker-multiple",text:"資源地圖",value:"option-2",height:"100",class:"text-body-1 ms-1"}),e(le,{"prepend-icon":"mdi-calendar-cursor",text:"活動分享",value:"option-3",height:"100",class:"text-body-1 ms-1"}),e(le,{"prepend-icon":"mdi-gift",text:"物資分享",value:"option-4",height:"100",class:"text-body-1 ms-1"})]),_:1},8,["modelValue"])]),_:1}),e(be,{class:"h-100"},{default:l(()=>[c("div",Rt,[e(me,null,{default:l(()=>[e(Ee,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=d=>p.value=d),class:"my-10"},{default:l(()=>[e(se,{value:"option-1"},{default:l(()=>[e(u,{title:F}),e(s)]),_:1}),e(se,{value:"option-2"},{default:l(()=>[e(u,{title:I}),e(Ot)]),_:1}),e(se,{value:"option-3"},{default:l(()=>[e(u,{title:x}),c("div",jt,[e(ft)])]),_:1}),e(se,{value:"option-4"},{default:l(()=>[e(u,{title:_}),c("div",Wt,[e(Vt)]),c("div",Gt,[e(Ut)])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})],64)}}};typeof ve=="function"&&ve(fe);const ba=W(fe,[["__scopeId","data-v-88a04cc9"]]);export{ba as default};
