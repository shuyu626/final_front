import{_ as D}from"./resourceDialog-9TrQbeII.js";import{_ as z}from"./appButton-qVoqxjX3.js";import{a as k,V as p,_ as F}from"./breadcrumbs-B6eWjn-N.js";import{i as R,n as o,N as L,O as j,o as d,c as b,b as e,w as s,F as x,t as S,ar as q,j as Q,a as _,e as I,V as $,l as G,S as O,T as H,A as w,as as J,h as K,p as W}from"./index-D-zaGDru.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as M,V as P}from"./VContainer-DvbIreSZ.js";import{V as Y}from"./VPagination-BelPR6ZW.js";import{a as Z}from"./VMenu-ChwRg2sX.js";import{V as T}from"./VCheckbox-QxAIQ7VQ.js";import{V as ee}from"./VNavigationDrawer-Ca4g9jNp.js";import"./inputText-CMS_nxIL.js";import"./index.esm-CjRbiz_X.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VSelect-CJ6fwJJm.js";import"./VChip-DBymHl0X.js";import"./VSlideGroup-nXb6I1D3.js";import"./ssrBoot-DSXQBn02.js";const ae={style:{width:"240px",height:"240px"},class:"d-flex justify-content-center b-1"},U=8,te={__name:"findMaterial",setup(le){const{api:A}=W(),B=R(),E=o(["物資分享","我要募資"]),r=o([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),i=o(!0),m=o([]),f=o(""),u=()=>{let n=r.value.filter(a=>a.selected).map(a=>a.name);const l=f.value.toLowerCase();i.value?m.value=c.value.filter(a=>a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l)):n.length===0&&l.trim()===""?m.value=[]:m.value=c.value.filter(a=>{const h=n.length===0||n.includes(a.category),v=a.name.toLowerCase().includes(l)||a.organizer.toLowerCase().includes(l);return h&&v})};L(f,()=>{u()}),L(()=>r.value.map(n=>n.selected),()=>{u(),i.value=r.value.every(n=>n.selected)},{deep:!0});const y=()=>{r.value.forEach(n=>{n.selected=i.value}),u()};j(()=>{y()});const g=o(1),C=o(1),c=o([]),V=async()=>{var n,l;try{const{data:a}=await A.get("/material/find",{params:{itemsPerPage:U,page:g.value}});C.value=Math.ceil(a.result.total/U),c.value.splice(0,c.value.length,...a.result.data),u(),console.log(c.value)}catch(a){console.log(a),B({text:((l=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return V(),(n,l)=>{const a=F,h=z,v=D;return d(),b(x,null,[e(P,null,{default:s(()=>[e(a,{title:E.value},null,8,["title"]),e(M,{width:"200",color:"yellow-darken-4",thickness:"5"}),e(k,{class:"mx-5"},{default:s(()=>[(d(!0),b(x,null,S(m.value,t=>(d(),I(p,{key:t.id,cols:"12",sm:"6"},{default:s(()=>[e($,{width:"650px",height:"300px",variant:"flat"},{default:s(()=>[e(k,{class:"align-content-center"},{default:s(()=>[e(p,{cols:"5",class:"ml-15"},{default:s(()=>[G("div",ae,[e(O,{src:t.image,contain:""},null,8,["src"])])]),_:2},1024),e(p,{cols:"5"},{default:s(()=>[e(H,null,{default:s(()=>[_(w(t.name),1)]),_:2},1024),e(J,null,{default:s(()=>[_(w(t.organizer),1)]),_:2},1024),e(K,null,{default:s(()=>[_("數量："+w(t.quantity),1)]),_:2},1024),e(h,{text:"詳細說明",class:"bg-third",to:"/material/find/"+t._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(p,{cols:"12"},{default:s(()=>[e(Y,{modelValue:g.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>g.value=t),V],length:C.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(ee,{class:"bg-primary b-1 text-center",width:"300"},{default:s(()=>[e(v,{type:"find",onUpdate:V}),e(q,null,{default:s(()=>[e(Q,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=t=>f.value=t)},null,8,["modelValue"])]),_:1}),e(Z,{class:"text-h5 font-weight-black text-left ml-2"},{default:s(()=>[_("物資類別")]),_:1}),e(M,{thickness:"2",length:"250",class:"mx-auto"}),e(P,null,{default:s(()=>[e(T,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value=t),label:"所有物品",onChange:l[3]||(l[3]=t=>y()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(d(!0),b(x,null,S(r.value,t=>(d(),I(T,{key:t.name,modelValue:t.selected,"onUpdate:modelValue":N=>t.selected=N,label:t.name,onChange:u,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},xe=X(te,[["__scopeId","data-v-95f72bfd"]]);export{xe as default};
