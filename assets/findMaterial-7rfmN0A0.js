import{_ as R}from"./resourceDialog-Bu2TE94u.js";import{_ as j}from"./appButton-D5guv0Qd.js";import{i as q,n,O as B,P as O,r as Q,o as r,c as V,b as e,w as t,F as h,C as $,ac as L,t as w,j as H,a as c,p as J,e as E,a5 as K,B as v,V as W,l as X,y as Y,T as Z,ad as ee,h as ae}from"./index-COBXCSfB.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as P,a as te}from"./VContainer-B-DKOWkg.js";import{V as se}from"./VNavigationDrawer-DXPUoS-X.js";import{V as oe}from"./VBreadcrumbs-X9zRYn5w.js";import{V as ne,a as re}from"./VSlideGroupItem-D5oRfGVE.js";import{d as ie,a as de}from"./VMenu-NO7MjHXi.js";import{V as z,a as b}from"./VRow-gXr7-a7_.js";import{V as me}from"./VPagination-C15EQ3xZ.js";import{V as M}from"./VCheckbox-DWw18ATZ.js";import{a as ue}from"./VSelect-LbRUtmjV.js";import"./inputText-DWFGnQO6.js";import"./index.esm-q6PiJNtl.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./ssrBoot-CNgd7gji.js";const ce={class:"d-flex justify-content-center b-1 item-img"},T=8,fe={__name:"findMaterial",setup(pe){const{api:U}=J(),A=q(),D=n([{title:"首頁",disabled:!1,href:"/"},{title:"我要募資",disabled:!0}]),i=n([{name:"食品",selected:!1},{name:"服飾配件",selected:!1},{name:"日用品",selected:!1},{name:"家具",selected:!1},{name:"輔具",selected:!1},{name:"教育用品",selected:!1},{name:"嬰幼兒用品",selected:!1},{name:"電器",selected:!1},{name:"休閒用品",selected:!1},{name:"其他",selected:!1}]),d=n(!0),f=n([]),p=n(""),m=()=>{let o=i.value.filter(s=>s.selected).map(s=>s.name);const l=p.value.toLowerCase();d.value?f.value=u.value.filter(s=>s.name.toLowerCase().includes(l)||s.organizer.toLowerCase().includes(l)):o.length===0&&l.trim()===""?f.value=[]:f.value=u.value.filter(s=>{const y=o.length===0||o.includes(s.category),k=s.name.toLowerCase().includes(l)||s.organizer.toLowerCase().includes(l);return y&&k})};B(p,()=>{m()}),B(()=>i.value.map(o=>o.selected),()=>{m(),d.value=i.value.every(o=>o.selected)},{deep:!0});const S=()=>{i.value.forEach(o=>{o.selected=d.value}),m()};O(()=>{S()});const _=n([]),F=o=>{const l=_.value.indexOf(o);l===-1?_.value.push(o):_.value.splice(l,1)},G=(o,l)=>{F(o),l(),console.log(_)},x=n(1),I=n(1),u=n([]),C=async()=>{var o,l;try{const{data:s}=await U.get("/material/find",{params:{itemsPerPage:T,page:x.value}});I.value=Math.ceil(s.result.total/T),u.value.splice(0,u.value.length,...s.result.data),m(),console.log(u.value)}catch(s){console.log(s),A({text:((l=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:l.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return C(),(o,l)=>{const s=Q("router-link"),y=j,k=R;return r(),V(h,null,[e(P,{class:"h-100"},{default:t(()=>[e(oe,{items:D.value},{divider:t(()=>[e($,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(L,{"max-width":"900",class:"mx-auto d-xl-none d-lg-block"},{default:t(()=>[e(ne,{class:"w-100 mx-auto d-inline-block"},{default:t(()=>[e(ie,{"show-arrows":"",multiple:"","mobile-breakpoint":"xxl"},{default:t(()=>[(r(!0),V(h,null,w(i.value,a=>(r(),E(re,{key:a.name},{default:t(({isSelected:g,toggle:N})=>[e(ue,{style:K({backgroundColor:g?"#616161":"#EEEEEE",color:g?"white":"black"}),class:"ma-2",onClick:()=>G(a.name,N)},{default:t(()=>[c(v(a.name),1)]),_:2},1032,["style","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(z,{class:"pl-lg-15 h-100"},{default:t(()=>[(r(!0),V(h,null,w(f.value,a=>(r(),E(b,{key:a.id,cols:"12",sm:"6"},{default:t(()=>[e(W,{variant:"flat"},{default:t(()=>[e(z,{class:"align-content-center h-100 my-4"},{default:t(()=>[e(b,{cols:"6",lg:"5",class:"ml-lg-15 ml-5"},{default:t(()=>[e(s,{to:"/material/find/"+a._id},{default:t(()=>[X("div",ce,[e(Y,{src:a.image,contain:""},null,8,["src"])])]),_:2},1032,["to"])]),_:2},1024),e(b,{cols:"5",lg:"5",class:"ml-4"},{default:t(()=>[e(Z,{class:"text-h6 font-weight-bold ms-md-1"},{default:t(()=>[c(v(a.name),1)]),_:2},1024),e(ee,{style:{"font-size":"16px"},class:"ms-md-1"},{default:t(()=>[c(v(a.organizer),1)]),_:2},1024),e(ae,{style:{"font-size":"15px"},class:"ms-md-1"},{default:t(()=>[c("數量："+v(a.quantity),1)]),_:2},1024),e(y,{text:"詳細說明",class:"bg-third ms-md-4 ms-3",to:"/material/find/"+a._id},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(b,{cols:"12"},{default:t(()=>[e(me,{modelValue:x.value,"onUpdate:modelValue":[l[0]||(l[0]=a=>x.value=a),C],length:I.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),e(se,{class:"bg-primary b-1 text-center",width:"300"},{default:t(()=>[e(k,{type:"find",onUpdate:C}),e(L,null,{default:t(()=>[e(H,{variant:"outlined",label:"搜尋","prepend-inner-icon":"mdi-magnify","hide-details":"","single-line":"",density:"comfortable",clearable:"",width:"250",class:"bg-white mx-auto mt-5 my-5",modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=a=>p.value=a)},null,8,["modelValue"])]),_:1}),e(de,{class:"text-h5 font-weight-black text-left ml-2"},{default:t(()=>[c("物資類別")]),_:1}),e(te,{thickness:"2",length:"250",class:"mx-auto"}),e(P,null,{default:t(()=>[e(M,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=a=>d.value=a),label:"所有物品",onChange:l[3]||(l[3]=a=>S()),"hide-details":"",density:"comfortable"},null,8,["modelValue"]),(r(!0),V(h,null,w(i.value,a=>(r(),E(M,{key:a.name,modelValue:a.selected,"onUpdate:modelValue":g=>a.selected=g,label:a.name,onChange:m,"hide-details":"",class:"ml-5",density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),_:1})]),_:1})],64)}}},ze=le(fe,[["__scopeId","data-v-44073141"]]);export{ze as default};
